# General / 総論

## string idについて
- 各種類のデータは文字列IDを設定して扱うことができます。  
  文字列IDから個別のデータを呼び出す際はデータの種類に対応した接頭辞を通して呼ぶことになります。  
  例えば、兵士ユニット「JOMSVIKING」を呼び出す際は"TRP_"という接頭辞がついた"TRP_nord_viking"、  
  武器「スパタ」を呼び出す際は武器の接頭辞"WEP_"がついた"WEP_Spatha"といった感じです。
  js等で記載され呼び出されているデータがどの種類のものなのかは、接頭辞からある程度推測できます。  
- もっとも、内部的には実行ファイル起動時にロードされて紐付けされている数字IDと紐付けされているだけです。  
  間違った場所に間違った種類のID（例えば兵士のIDを入力すべき場所に武器のIDを入れてしまうなど）を入れてしまっても、  
  その時点で直ちにエラーが出るというわけではないのに気をつけてください。
- 内部設定される数字IDとの紐付け関係については、変更があった場合起動ごとに自動更新され、  
  各種類ごとに{GameDirectory}/Scripts/const_*_id.txt へ出力されます。

## 定義ファイルについて

### Data JSON format
一部のデータはJSON形式を用いて入力することができます(v1.162現在では兵士のみ)。  


- 2003MPのファイルシステムが.txtまたは.csv以外のファイル形式を無視するようになっているため、  
  実際には拡張子を.json.txtにした上でDISに読み込ませる必要があります。
- Since 2003MP's file i/o system cannot deal with other file type than .txt or .csv,  
  json files must be converted into .json.txt file at last.

### Data csv format
Expected default language is English.  
Delimiter is ",". If you want to use comma in some case, please use $; instead.  

--------------------

通常データcsvへのデフォルト記載は英語を想定している。  
デミリタは","なので、 **半角カンマを使うとデータが壊れることに注意**。  
日本語環境では半角カンマを使うことは少ないと思われるが、  
DISにおいては **$;** と記載するとゲーム中で自動的に半角カンマに置換される。  

# Troops 
## Essential Elements / ユニット定義csvと共通するプロパティ

### id
Definition of string id.  
"TRP_" prefix for troop units set to the id in actual process.  
For example, if the unit id is "nord_viking", then the unit will be referred to as "TRP_nord_viking".  

-----

ユニットの文字列IDの定義欄です。  
**この欄については２バイト文字を使わないことを強くオススメします**。  
実際に文字列IDを使って兵士を参照する場合、"TRP_nord_viking"のように"TRP_"という接頭辞がつきます。

### name
Unit name.

-----

ゲーム中でのユニット表示名です。  
デフォルトでは英語が使われていますが、別に日本語でも問題なし。

### agentDefaultGrp

-----

一括選択時の初期グループです。  
似たようなユニットには同じ数字を割り当てると扱いやすくなります。

### agentType

-----

### agentSprite

-----

スプライト型ユニットの場合、ここでスプライトを指定します。

### race

-----

種族

### skin

-----

スキン、種族が人間でも性別や肌や髪のパレットを振り分けることができます。
気にしない場合はポテチ人（RTPパレット）か帝国のスキンを指定しておけばよいでしょう。

### width

-----

ユニット当たり判定の横幅です。単位は1ピクセル。

### height

-----

ユニット当たり判定の縦幅。単位は1ピクセル。

### faction

-----

所属文化を指定します。  
鼓舞効果等の影響が変わってきます。  
また、竜族（"FAC_dra"）に指定された場合は天帝軍以外での出撃速度が18%低下します。
設定可能勢力については/Module/{yourmodule}/Dataディレクトリ中のdata_factiontemplatesという名前のついたファイルを参照。  


### passiveId

-----

今のところパッシブ欄の記載にしか関係しません。  
組み換え予定。  

### unitclass

-----

0:歩兵
1:射手
2:騎兵

### Lv

-----

ユニットレベルを設定します。  
内部的な戦力値算定の他、レベルの上がりやすさ等にも関与します（高い方が上がりにくい）。  
- **竜族のみ**ユニットレベルに比例したボーナス装甲が付与されるため、  
竜族ユニットを設定する際は固くなりすぎに注意してください。

### HP

最大ヒットポイントを設定します。  
raceが設定されている場合は、raceデフォルト値にさらにこの数値が加算された数値が現実のユニットパラメータとなります。  
このあとに続く全てのパラメータも同じ仕様です。

### SP

最大スタミナポイントを設定します。  

### AD

基礎攻撃力を設定します。
- 弓・クロスボウ等の武器についてはユニット個別のADは無視され、武器の威力だけが反映されます。

### AP

基礎魔力を設定します。
- unitclassが魔法使いのユニットは、友軍の持っている学問所の数に応じて自動でバフを得ますが、  
  ステータス欄に表示されるAP値には反映されません。

### AR

基礎装甲を設定します。  
DISのユニットの装甲システムは基本的に鎧に依存するようにデザインされています。  
ユニット基礎装甲の設定が必要となるのは、基本的にヒーロー格のユニットやまともな鎧を着ないユニットのみと考えた方が吉です。  


### MR

基礎魔法抵抗を設定します。  
どの種族も基本的に最低30は魔法抵抗を持っています。  
ボスやヒーロー格のユニットは増やしてもよいでしょう。  

### HIT

基礎命中率を設定します。  
種族によって高低ありますが、基礎値が大体35程度なのを意識して足し算で設定するとよいでしょう。  
- 感覚的にはデフォで実数値60~くらいないとまともに戦えません。  
  剣及び槍にはHITボーナスがあるため、雑兵は基礎命中率を抑えた上でそのような系統の武器を持たせてあげると良いです。  
- 参考として、DIS:Lのバランス感覚はこんな感じです。  
  
| x | 一般人 | 民兵 | 非正規軍 | 正規軍 | エリート部隊 | ヒーローやノルド人 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- | :---| :--- |
| 記載値(実数値) | 5(40) | 15(50) | 20(55) | 25(60) | 35(65) | 40~(70~) |

### EVA

基礎回避率を設定します。  
- 後述のPerkや盾による増加もあるため、あまり上げすぎると生残性が高まりすぎる傾向があります。  
- また、よほど極端な数値を設定しない限り、盾を持っていないユニットが飛び道具を全回避するのはまず無理な仕様になっています。  
- 盾の効果で場合によっては+30近く加算されることがあるため、特殊部隊とか物凄い達人というような設定でもないのであれば、  
  ゲームバランス上、どんなに高くても10程度に留めることをおすすめします。  
  両手持ちで30あったら物凄い無双の剣士というようなイメージです。  

### Crit

増加クリティカル値を設定します。  
システム上クリティカルダメージは火力に大きな影響を与えるため、上げすぎない方がいいです。  
もっとも、グラスキャノンな性質を持つユニットの火力が足りないと感じたらば+2%くらいはしてみても面白いかもしれません。  
- どんなユニットでも最低1%のクリティカル率を持つようになっており、Perk"Head Hunter"の効果で更に倍加します。
- また、騎兵ユニットは上から振り下ろして頭に当てやすいというイメージから、自動的に+1%のボーナスを得るようになっています。

## MS

増加移動速度を設定します。  
種族固有値と装備荷重による減少に馬速度を足したものに更に足し上げる形になるため、地味に調整が難しいかもしれません。  
ガチガチに重い鎧を着せてしまうと足が遅すぎてどうしようもなくなったりするため、ある程度調整する程度の感覚で設定するのが吉です。  

### WILL

基礎意思値を設定します。  
士気の高さや精神攻撃に対する抵抗力を表す数値です。  
人間だけ飛び抜けて高く、竜族だけ飛び抜けて低くなっています。  
フレーバー的には寿命が長いほど低いと思ってください。  
- ゲームシステム上人間が他の種族に対して唯一勝っているパラメータであり、  
  同時に竜族が他の種族に対して唯一大きく劣っているパラメータです。  
  強めの異種族ユニットはWILLを低めにしておくと味が出るでしょう。  

### MainWeapon

メイン武器を設定します。  
"WEP_"  

### WEPvariations

武器のスプライトバリエーションを指定します。  
今の所未使用。  

### Shield

盾を設定します。  
"SHD_"  

### SHDvariations
### Armor

"AMR_"

### AMRvariations

鎧のスプライトバリエーションを指定します。  
今の所未使用。  

### Helmet

"HEL_"

### HELvariations

兜のスプライトバリエーション指定。

### Accessory

"ACC_"

### ACCvariations
### SubWeapon

"WEP_"

### SubWEPvariations
### ReserveSetL

"SHL_"

### ?

たぶん馬の指定欄になります
このあたり変わるかもしれません。

### ActiveSkill:0

Qスキル。

### ActiveSkill:1

Wスキル

### ActiveSkill:2

Eスキル

### ActiveSkill:3

Rスキル

### PassiveSkill

パッシブスキル

### Perks1

Perkスロット1

### Perks2

Perkスロット2

### Perks3

Perkスロット3

### Perks4

Perkスロット4  
未使用。

### motionFlags

アニメーション関連のフラグ。

### objFlags

オブジェクト固有のフラグ。  
爆発等、詳細はこんど

### AABits

通常攻撃の特殊フラグ。  
特定クラスへの特効効果等。  
武器の設定フラグに対して上書きではなくORで処理されます  
（例：対騎兵属性持ちの槍を持つユニットに対歩兵属性フラグを立てると歩兵にも騎兵にも特効効果がつく）

### ExtraSettingEv

spawn時に挟まる特殊処理。  
jsで指定可能

### ExtraParts

未使用。

### Hpreg

HPリジェネ基礎値。  
ドラゴンのみ自動的に基礎値が設定されますが、この欄に記載がある場合は記載値が優先されます。  

### Spreg

SPリジェネ基礎値。  
種族固有の基礎値（ドラゴン以外は基本10）を上書きします。  
実際のリジェネ値はセットされているPerkや装備によってさらに上下します。  

### AS

攻撃速度。  
DISのシステム上、ユニットの基本攻撃速度は({種族固有値}+{武器の攻撃速度})で決まります。  
ようするに武器を装備しない攻城兵器や魔法使い以外は設定する必要がないということです。

### MoveTypeBits

移動タイプ。  
騎乗ユニットには自動的に騎兵型移動タイプが設定されます。  
得意地形がある場合はその地形上で移動速度ボーナスを得られます。  
飛んでいるユニットは地形の影響を完全に無視します。  
強襲揚陸フラグがある場合、気合で水面を歩き回ります。

### AArangeMax
### AArangeMin
### AAframe
### AAcost
### AAFunction
### reserve
### AtkTime
### AAarmorEff
### AAarmorPen
### AAeffect
### AIFlag
### spriteOffset_x
### spriteOffset_y
### train_speed

生産速度。  
高いと出るのが早く、低いと出るのが遅いです。

### food

食料コスト

### wood

木コスト

### stone

石コスト

### gold

金コスト

### iconsprite

アイコンスプライト指定

### spawnsound

出撃時の効果音

### ex_spawn_cev

出撃時に呼び出される関数

### Description

ユニット説明。

### Lore

フレーバーテキスト。  
見づらいのでAltボタンを押しているときのみ表示されます。

## Troop data JSON
csv中の要素と同じもの以外にも特殊なプロパティをいくつか設定可能。  
また、 **csvとは記法の異なるものが一部含まれていることに注意！**

### INHERITS
データ継承元の指定。  
指定された場合、継承元のデータを初めにコピーします。  
これを活用することにより、既存のユニットと似たユニットを作る場合、細かい部分の設定を省くことができます。  
たとえば、ヒト型共通規格のユニットを作る場合、`"INHERITS": "TRP_merc_militia"`という記載をおいてしまえば、  
アニメーション回りの設定等は省けます。  

### 他言語対応
"name","Decription","Lore"等のプロパティについては、  
言語に対応する接尾辞（language config参照）をつけたプロパティを追記することで、  
かんたんに他言語対応ができます。  
例：
`
"name": "Orthunass Nasun Solanum",
"name_jp": "オトナス・ナスン・ソラヌム"
`  
- モジュール単位で対応する翻訳データが存在して競合する場合は、モジュールの言語ファイルが優先して適用されます（予定）。



