DIS:Legacy v1.162BETA1fix3

Update: "EQUITES PORRO" - Proto

今のところプレイヤーが覚知できる変更部分はほぼ軽量化だけです
内部的に描画システムが大幅に組み替えられたためバグりがちです
何か見つけたら報告お願いします


1.162BETAロードマップ：
	投擲武器のリロードとAIによる自動持ち替え制御
	馬とアクセサリの分離
	★ステージ追加
	カスタムユニットシステム実装？（Elonaのあれみたいな）
	ユニットセリフシステム実装？（ヴァーレンのあれみたいな）

	…晩夏ごろの正式リリースが目標。ステージ追加以外は大して変わりません

1.7?:
	マップエディタ追加
	ステージ製作リファレンス等の用意
	英語完訳
	Denys氏によるUIリデザイン？
	


翻訳関係：
	//＊ストーリーモードの流れを仮訳。＊

追加：
	/*
	・エンデュランス新ステージ追加
		-「大八洲」
		…まつろわぬ民が住まう複雑な地形の島々を平定し，外敵の侵入に備えましょう。
		　敵はヴァイキングではありません。
		
	・戦術マップの追加
		-「トレーニング（ポテチ）１」
		　約一年ほど遅い戦術チュートリアルマップです。
		ポテチの雑兵と帝国の雑兵の小競り合いです。
		歩兵隊の組み合わせや配置についての基礎的なことが学べます。ポーズを使わなければおそらく１分で終わります。

		-「トレーニング（帝国）」
		　「天帝南征」よりも前に起きていた竜族と帝国の小競り合いのうちの一つです。
		辺境防衛隊の弱いユニットを使ってドラさんたちを撃退しましょう。
		視界取りと攻城兵器の大切さを学ぶシナリオ……
		と見せかけて、ユニットパワーの関係で一筋縄ではいかない難度かもしれません。

		-「ペトロウカ」

	*/

	・操作の追加
		-Ctrlキーを押しながら右クリックで経路探索付きの移動指示をできるように。

	・アドバンスドタイルシステム（仮）
		-前々から用意していた高度情報等を動的に変更して描画に反映したりマップタイルを細かく書き換えたりできるシステムの試験を開始。
		 すこし重くなるかもしれませんが，BETA版の軽量化度合いがまず凄まじいのでわからないでしょう。
		
変更:

	・総論
		-描画システムを再構築。今まで一ユニットには6枚のスプライトしか使えませんでしたがこれから理論上9枚まで割り当てられるようになります。
		 とはいえそんなに重ねて表現したいものがいまのところ髪の毛くらいしかないためとりあえず8枚設定で負荷チェックのテスト。

		・ユニット超過密状態を避けるためのシステム変更
			-前線であまりにもユニットが渋滞している場合は動きが少し遅くなるように変更。
			-渋滞している場所にユニットが向かう時は少しもたつくように変更。
			-超過密状態での衝突処理はよりユニットをばらけさせることを意識した計算を行うように変更。

		・弓矢のシステム変更
			-矢の弾道計算を通常の放物投射運動へと変更。
			 勿論全てのユニットは投射角度を計算した上で射撃を行います。
			-地面に落下したフレームだけでなく，一定の高さを下回った時点で命中チェックが行われるように変更。
			 パラメータを参照する回避判定の合計回数は従来と同じ一回だけですが，命中判定自体は行われやすくなります。

		・高度システムの変更
			-より高度の高い位置へ移動する際はSPを消費するように変更。
			 大して変わりませんが，戦闘中しながら高台へ移動しようとするとSPが削れて苦労するかもしれません。
		 	 特に騎兵はSP消費が激しくなります。起伏のある場所では思わぬ苦戦をするかもしれません。
			 当然ですが飛行ユニットには影響がありません。

		・シールドウォールの変更
			-性能変更
			
			-オーラ効果の追加
		
		・パイクウォールの変更
			-周囲の騎兵タイプユニット（馬に乗っていない騎兵扱いの者を含む）に対して自動で白兵戦ペナルティを付与するように。
			 白兵戦ペナルティはスピードボーナスをかき消すため，騎兵がパイク兵と戦うのは至難の業になります。
			 ちゃんとパイクウォールを使うパイク兵であればですが。

	・騎兵の変更
		-スピードボーナスを現在移動速度の8%から10%に変更。段々とある意味極端な存在へ変わってきました。

	・攻城兵器の変更
		-「カタパルト」の最低射程を「帝国破城投石機」と同じ数値に変更。
		　通常のカタパルトの方は帝国のものよりも最低射程が短くセットされていたのですが，意図したものではなかったため延長する形で変更。
		-「カタパルト」系ユニットの必要最低射程を少し増加。騎兵で処理しやすいように。

	・演出の変更
		-「スコーピオン」系の貫通ボルトにも影が付くように変更。
		- 共通規格のユニットは状況に応じて瞬きをしたり表情が変化したりするように変更。

	・パフォーマンス
		-ユニット処理を再構築して抜本的に軽量化。恐ろしく軽くなります。逆にいうとこれ以上毎f処理されている処理を軽くするのは無理かも。
		-現在能力値計算をリメイクして軽量化。
		-描画処理を作り直して軽量化。
		-マップスクリプトの処理を高速化。
		-建築物のミニマップ処理をさらに高速化。
		-各ユニットのチーム判定処理に無駄があったのを組み換え。
		-衝突判定を更に効率化。
		-その他細かい計算を効率化。


v1.161からの修正：
	-2019年当時のテキストから変更されていたはずの内容がマップに反映されていなかったのを修正。
	 時事の状況がより酷くなって，当時のテキストはもう本当に洒落にならないことになってしまいました。どうしてこうなった。
	-友軍建物のキルや撃破数が，一部の友軍ユニットのキル数と撃破数に算入されてリザルトで表示されていた不具合を修正。

BETA期間の修正：
	-通れないマップタイル判定が壊れていたのを修正(BETA1fix2)。
	-マップのちょっとした押し出し処理のポインタ処理が壊れており，色々と奇怪なことが起きていたのを修正(BETA1fix2)
	-町の中心から出た労働者がちゃんと仕事してくれなくなっていたのを修正(BETA1fix2)
	-敵と交戦しているときの経路探索処理がバグってずっとその場を行ったり来たりしていたのを修正(BETA1fix3)
	↑まだなおってなかった
	-描画システム変更の影響で750体以上のユニットが出撃すると当たり判定を破損させていた不具合を修正(BETA1fix3)
	-弓騎兵が攻撃する際必ず馬が後ろを向いてしまっていた不具合を修正(BETA1fix3)

既知の不具合：
	-ストーリーモードでリスタートすると何も始まらない状態になる
	-クルシラの敵の経路がたまにおかしくなる
	-アリーナで無敵の骸骨が出る？（未確認）

プレイヤーにほぼ関係のない変更：
	-マップエディタ機能着手
	-RPGツクールシリーズの利用規約更新に対応したクレジット表記を追加。
