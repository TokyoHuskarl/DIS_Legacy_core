cev .id(6), .name("cev6"), {
@if .rightAfterLoad() {
    
} .else bl {
    @if s[43] .isOff() {
        s[41..44].off
        
    }
    @if v[96] <= 0 {
        @if s[43] .isOff() {
            v[61] = v[937] >= 1 ? 2 : v[939] >= 1 ? 3 : 0
            v[62] = v[938] >= 1 ? 4 : v[940] >= 1 ? 1 : 0
            @if `v[61] != 0 || v[62] != 0 {
                @if v[61] == 2 {
                    v[61] = -1
                    
                } .else bl {
                    @if v[61] == 3 {
                        v[61] = 1
                        
                    }
                    
                }
                @if v[62] == 1 {
                    v[62] = 1
                    
                } .else bl {
                    @if v[62] == 4 {
                        v[62] = -1
                        
                    }
                    
                }
                
            } .else bl {
                v[341] = v[49]
                v[342] = v[50]
                @comment "横"
                v[320] = v[1001] - 1
                @if v[341] >= v[320] {
                    @if s[45] .isOff() {
                        v[61] = 1
                        
                    } .else bl {
                        v[61] = 0
                        
                    }
                    
                } .else bl {
                    v[320] = v[1003] + 1
                    @if v[341] <= v[320] {
                        @if s[46] .isOff() {
                            v[61] = -1
                            
                        } .else bl {
                            v[61] = 0
                            
                        }
                        
                    } .else bl {
                        v[61] = 0
                        
                    }
                    
                }
                @comment "たて"
                v[320] = v[1002] - 1
                v[320] = s[11] == 0 ? v[320] : v[1286]
                @if v[342] >= v[320] {
                    @if s[48] .isOff() {
                        v[62] = 1
                        
                    } .else bl {
                        v[62] = 0
                        
                    }
                    
                } .else bl {
                    v[320] = v[1003] + 1
                    @if v[342] <= v[320] {
                        @if s[47] .isOff() {
                            v[62] = -1
                            
                        } .else bl {
                            v[62] = 0
                            
                        }
                        
                    } .else bl {
                        v[62] = 0
                        
                    }
                    
                }
                @if v[61] != 0 {
                    v[80] += 1
                    
                } .else bl {
                    @if v[62] != 0 {
                        v[80] += 1
                        
                    } .else bl {
                        v[80] = 0
                        
                    }
                    
                }
                
            }
            v[80] = s[304] == 0 ? v[80] : 0
            @key.input .dst v[44] {
                .mclick
            }
            v[80] = v[44] == 1007 ? 150 : 0
            v[305] = v[305] + v[306]
            @if v[61] == 1 {
                @if v[62] == 1 {
                    v[163] = v[1181]
                    v[164] = v[1181]
                    
                }
                @if v[62] == 0 {
                    v[163] = v[1181]
                    
                }
                @if v[62] == -1 {
                    v[163] = v[1181]
                    v[164] = v[1181] * -1
                    
                }
                
            }
            @if v[61] == 0 {
                @if v[62] == -1 {
                    v[164] = v[1181] * -1
                    
                }
                @if v[62] == 1 {
                    v[164] = v[1181] * 1
                    
                }
                
            }
            @if v[61] == -1 {
                @if v[62] == 1 {
                    v[163] = v[1181] * -1
                    v[164] = v[1181] * 1
                    
                }
                @if v[62] == 0 {
                    v[163] = v[1181] * -1
                    
                }
                @if v[62] == -1 {
                    v[163] = v[1181] * -1
                    v[164] = v[1181] * -1
                    
                }
                
            }
            @if v[80] > v[1110] {
                v[163..164] *= 5
                v[163..164] /= 2
                
            }
            
        }
        
    } .else bl {
        v[96] -= 1
        
    }
    @comment "################################"
    v[167] .add v[163], 2
    @if `abs(v[167]) >= 1000 || abs(v[168]) >= 1000 {
        v[0] = v[169..170] = [v[167] / 1000, v[168] / 1000]
        v[161] .add v[169], 2
        v[161] = min(max(v[161], v[517]), v[519])
        v[162] = min(max(v[162], v[518]), v[520])
        v[167..168] %= 1000
        @comment "#########################"
        v[0] = v[472..477] = [7, 17, 161, 162, 6, 0]
        @comment "#########################"
        v[471] = 11060
        @comment "#Safety"
        @cmd v[471], "", .args v[472], 6
        s[71].on
        
    } .else bl {
        s[71].off
        v[169..170] = 0
        
    }
    v[0] = v[165..166] = [v[161] / 16, v[162] / 16]
    @comment "################################"
    v[1301].copy v[163], 2
    @comment "################################"
    v[341] = v[1282] + muldiv(v[165], 100, v[430])
    v[342] = v[1283] + muldiv(v[166], 100, v[431]) - 1
    @comment "Picture loaded in MapInit"
    @pic[2200].move {
        .pos v[341], v[342] .center
        .scale 100
        .trans 15
        .time 0
        .rgbs 100, 100, 100, 100
    }
    
}
}