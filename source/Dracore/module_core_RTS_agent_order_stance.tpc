
//cev id 1740 -Alert Order func v2v3
__fn func_agentlist_order_alert $listptr $amount $alt {
	v[290] = $listptr
	@if v[v[290]] > 0 {
	    // "待機指示"
	    @loop $amount {
		@if v[v[290]] == 0 {
		    // "とぎれた"
		    @break
		    
		}
		// "配列ゲット"
		v[301] = v[v[290]] * 300
		v[301] += 4700
		@if `v[v[301] + 1] < 9 {
		    // "Break Manual Flag"
		    v[v[301] + 34] &= ~131072
		    v[296] = v[301] + 241
		    // "処理開始"
		    v[v[296]] = 0
		    @if $alt == 0 {
			// "#Command"
			v[740] = v[301] + 140
			// "#ShieldWall"
			v[341] = v[v[740]] & 4
			// "##Check Perk:Shield Master"
			v[342] = v[v[301] + 65] & 1
			@if v[341] == 4 {
			    v[371] = (v[v[301] + 248] & 2) == 2 || (v[v[301] + 248] & 4) == 4 ? 1 : v[371]
			    // "#バフ番号指定"
			    v[341] = v[342] == 1 ? 4 : 2
			    v[v[301] + 248] ^= (v[v[301] + 248] & 2) == 2 || (v[v[301] + 248] & 4) == 4 ? v[341] : 0
			    
			}
			// "#Skirmish"
			v[341] = v[v[740]] & 16
			@if v[341] == 16 {
			    v[372] = (v[v[301] + 248] & 8) == 0 ? 1 : v[372]
			    // "#バフ番号指定"
			    v[v[301] + 248] |= 8
			    
			}
			// "#PikeWall"
			v[341] = v[v[740]] & 2
			@if v[341] == 2 {
			    v[373] = (v[v[301] + 248] & 1) == 1 ? 1 : v[373]
			    // "#バフ番号指定"
			    v[v[301] + 248] ^= (v[v[301] + 248] & 1) == 1 ? 1 : 0
			    
			}
			// "#Support"
			@if `v[v[301] + 140] & 8388608 {
			    v[374] = v[v[301] + 248] & 16 ? 1 : v[374]
			    // "#バフ番号指定"
			    v[v[301] + 248] &= v[v[301] + 248] & 16 ? ~16 : 0
			    
			}
			// "#Banner"
			@if `v[v[740]] & 1048576 {
			    v[375] = v[v[301] + 248] & 64 ? 1 : v[374]
			    // "#バフ番号指定"
			    v[v[301] + 248] &= v[v[301] + 248] & 64 ? ~64 : 0
			    
			}
			
		    }
		    // "処理終わり"
		    v[290] += 1
		    
		}
		
	    }
	    
	    
	}

}

//cev id 1742 -Def Order func v2v3 
__fn func_agentlist_order_def $listptr $amount $alt {

	v[290] = $listptr
	// "#v3=tactical order"
	@if v[v[290]] > 0 {
	    // "待機指示"
	    @loop $amount {
		@if v[v[290]] == 0 {
		    // "とぎれた"
		    @break
		    
		}
		// "配列ゲット"
		v[301] = v[v[290]] * 300
		v[301] += 4700
		@if `v[v[301] + 1] < 9 {
		    // "Break Manual Flag"
		    v[v[301] + 34] &= ~131072
		    v[296] = v[301] + 241
		    // "処理開始"
		    v[v[296]] = 3
		    @if $alt == 0 {
			// "#Command"
			v[740] = v[301] + 140
			// "#ShieldWall"
			v[341] = v[v[740]] & 4
			// "##Check Perk:Shield Master"
			v[342] = v[v[301] + 65] & 1
			@if v[341] == 4 {
			    @if `(v[v[301] + 248] & 2) == 0 && (v[v[301] + 248] & 4) == 0 {
				v[371] = 1
				v[v[301] + 85] = rnd(12, 16)
				
			    }
			    // "#バフ番号指定"
			    v[v[301] + 248] |= v[342] == 1 ? 4 : 2
			    @if `s[v[v[290]] + 500] == 1 && v[182] < 2 {
				v[182] += 1
				// "#########################"
				v[471] = 11550
				v[472] = divmul(62, 100, v[2216])
				v[473] = 75
				v[474] = divmul(v[v[301] + 7] + v[1001], v[1281], 50)
				// "#########################"
				@cmd v[471], "weapons\shieldwall", .args v[472], 3
				
			    }
			    
			}
			// "#Skirmish"
			v[341] = v[v[740]] & 16
			@if v[341] == 16 {
			    v[372] = (v[v[301] + 248] & 8) == 8 ? 1 : v[372]
			    // "#バフ番号指定"
			    v[v[301] + 248] ^= (v[v[301] + 248] & 8) == 8 ? 8 : 0
			    
			}
			// "#Support"
			@if `v[v[740]] & 8388608 {
			    v[374] = !(v[v[301] + 248] & 16) ? 1 : v[372]
			    // "#バフ番号指定"
			    v[v[301] + 248] |= !(v[v[301] + 248] & 16) ? 16 : 0
			    
			}
			// "#PikeWall"
			v[341] = v[v[740]] & 2
			@if v[341] == 2 {
			    @if `(v[v[301] + 248] & 1) == 0 {
				v[373] = 1
				v[v[301] + 82] = rnd(5, 8)
				
			    }
			    // "#バフ番号指定"
			    v[v[301] + 248] |= 1
			    @if `s[v[v[290]] + 500] == 1 && v[182] < 2 {
				v[182] += 1
				// "#########################"
				v[471] = 11550
				v[472] = divmul(62, 100, v[2216])
				v[473] = 75
				v[474] = divmul(v[v[301] + 7] + v[1001], v[1281], 50)
				// "#########################"
				@cmd v[471], "weapons\pikewall", .args v[472], 3
				
			    }
			    
			}
			// "#Banner"
			@if `v[v[740]] & 1048576 {
			    v[375] = !(v[v[301] + 248] & 64) ? 1 : v[372]
			    // "#バフ番号指定"
			    v[v[301] + 248] |= !(v[v[301] + 248] & 64) ? 64 : 0
			    
			}
			
		    }
		    // "処理終わり"
		    v[290] += 1
		    
		}
		
	    }
	    
	    
	}

}


//standby order - have no cev 
__fn func_agentlist_order_stand $listptr $amount $alt{
	v[290] = $listptr
	@if v[v[290]] > 0 {
	    // "待機指示"
	    @loop $amount {
		@if v[v[290]] == 0 {
		    // "とぎれた"
		    @break
		    
		}
		@if v[290] > v[1007] {
		    @break
		    
		}
		// "配列ゲット"
		v[301] = v[v[290]] * 300 +4700
		@if `v[v[301] + 1] < 9 {
		    v[296] = v[301] + 241
		    // "処理開始"
		    v[v[296]] = 1
		    // "Break Manual Flag"
		    v[v[301] + 34] &= ~131072
		    // "処理終わり"
		    v[290] += 1
		    
		}
		
	    }
	    
	    
	}
}



