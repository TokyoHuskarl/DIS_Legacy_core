
@comment "module_core_RTS_ui_central_monitor.tpc"
//@comment "表示なし"
@if s[57] .isOff() {
    @if v[81] == 0 {
        s[30].off
        //@comment "Disable Formation Info"
        //v[0] = v[341..342] = [v[1165], v[1165] + 39]
	v[341] = v[1165]
	v[342] = v[1165] + 39
        @pic[v[341]..v[342]].erase
        //@comment "Disable Buff icons"
        @pic[1799..1800].erase
        @pic[975..977].erase
        @pic[980..985].erase
        @pic[995].move {
            .pos v[1041], v[1042] .center
            .scale 100
            .trans 100
            .time 0
            .rgbs 100, 100, 100, 100
        }
        //@comment "#Static"
        @pic[v[1226]].move {
            .pos v[1041], v[1042] .center
            .scale 100
            .trans 100
            .time 0
            .rgbs 100, 100, 100, 100
        }
        v[341] = v[4556]
        @loop 4 {
            @pic[v[341]].move {
                .pos 0, 0 .topLeft
                .scale 0
                .trans 100
                .time 0
                .rgbs 100, 100, 100, 100
            }
            v[341] += 1
            
        }
        
        @pic[1795].move {
            .pos v[1041], v[1042] .center
            .scale 100
            .trans 100
            .time 0
            .rgbs 100, 100, 100, 100
        }
        //@comment "#Tactical Order"
        @pic[1796].move {
            .pos v[1041], v[1042] .center
            .scale 100
            .trans 100
            .time 0
            .rgbs 100, 100, 100, 100
        }
        //@comment "#Morale"
        @pic[1797].move {
            .pos v[1041], v[1042] .center
            .scale 100
            .trans 100
            .time 0
            .rgbs 100, 100, 100, 100
        }
        //@comment "#Melee Penalty"
        @pic[1798].move {
            .pos v[1041], v[1042] .center
            .scale 100
            .trans 100
            .time 0
            .rgbs 100, 100, 100, 100
        }
        @loop 8 .dst v[235] {
            v[341] = v[1127] * v[235] 
	    v[341] += v[1125]
            v[235] += 987
            @pic[v[235]].show {
                "ui\bufficon"
                .pos v[341], v[1126] .bottom
                .chromakey 1
                .scale 100
                .trans 100
                .rgbs 100, 100, 100, 100
                .grid 8, 5 .cell 1
                .mapLayer 8
                .affectedByShake
            }
            
        }
        
        //@comment "Operation Panel"
        @pic[981].move {
            .pos 16, 232 .center
            .scale 100
            .trans 100
            .time 0
            .rgbs 100, 100, 100, 100
        }
        v[341] = v[496] * v[1129] 
	v[341] += v[1130]
        @if `v[1971] != v[205] || v[1972] != v[206] || v[1973] != v[v[4580]] {
            v[342] = min(v[v[4580]], v[1080])
            v[343] = v[205] >= v[342] ? 17 : 0
            @if .testPlay() {
                @pic[978].strpic {
                    " Player Units:\c[\v[343]]\v[205]/\v[342]\c[0]  Enemy Units:\v[206]
    \t[750] \t[751] \t[752]"
                    .pos v[1296], v[1297] .topLeft
                    .size 0, 0                    .chromakey 1
                    .scale 100
                    .trans 0
                    .rgbs 100, 100, 100, 100
                    .font t[530], 11 .noShadow
                    .spacing 0, 0
                    .skin "" .nobg .noframe .noGradation .noPadding
                    .mapLayer 8
                    .eraseWhenTransfer
                    .affectedByFlash
                    .affectedByShake
                }
                
            } .else bl {
                @pic[978].strpic {
                    " Player Units:\c[\v[343]]\v[205]/\v[342]\c[0]"
                    .pos v[1296], v[1297] .topLeft
                    .size 0, 0                    .chromakey 1
                    .scale 100
                    .trans 0
                    .rgbs 100, 100, 100, 100
                    .font t[530], 11 .noShadow
                    .spacing 0, 0
                    .skin "" .nobg .noframe .noGradation .noPadding
                    .mapLayer 8
                    .eraseWhenTransfer
                    .affectedByFlash
                    .affectedByShake
                }
                
            }
            
        }
        v[1971] = v[205]
        v[1972] = v[206]
        v[1973] = v[v[4580]]
        @wait 0
        @if s[18] .isOn() {
            @if s[5] .isOff() {
                //@comment "#Check Terrain"
                v[51].copy v[11], 2
                v[12] -= 8
                @call .cev 2000
                @if `v[1974] != v[21] || v[1975] != v[22] {
                    //@comment "######################Get Terrain and Elevation info"
                    v[313] = v[v[1182] + v[21] - v[69] + (v[22] - v[70]) * v[2061]]
                    v[341] = v[313] / 100000000
                    v[350] = v[51]
                    v[351] = v[52] - 16
                    v[342] = v[1239] +v[313] % 100
                    @if .testPlay() {
                        t[501] .asg "

    \t[20110] \t[\v[342]] \t[20111]\v[341] (\v[21],\v[22])" .extract
                        
                    } .else bl {
                        t[501] .asg "
    \t[20110] \t[\v[342]] \t[20111]\v[341]" .extract
                        
                    }
                    @comment "######################"
                    v[1974] = v[21]
                    v[1975] = v[22]
                    @pic[979].strpic {
                        t[501]
                        .pos v[1296], v[1297] .topLeft
                        .size 0, 0                        .chromakey 1
                        .scale 100
                        .trans 0
                        .rgbs 100, 100, 100, 100
                        .font t[530], 11 .noShadow
                        .spacing 0, 0
                        .skin "" .nobg .noframe .noGradation .noPadding
                        .mapLayer 8
                        .eraseWhenTransfer
                        .affectedByFlash
                        .affectedByShake
                    }
                    
                }
                
            } .else bl {
                @pic[979].erase
                
            }
            
        }
        @wait 0
        
    }
    //@comment "単体ステータス"
    @if v[81] == 1 {
        //@comment ""
        v[325] = v[101] * 300 
	v[325] += 4802
        v[v[325]].copy v[702], 38
        v[325] += 3
        @if v[706] > 0 {
            //@comment "HPバーびよ～ん"
            //@comment "処理開始"
            v[306] = v[706] * 100
            //@comment "#0除算防止"
            v[305] = max(v[705], 1)
            v[306] /= v[305] * 2
            v[306] = max(v[306], 2)
            v[306] = min(v[306], 50)
            v[341] = v[1296] + 3
            v[342] = v[1297] + 11
            @if v[706] != v[1971] {
                @pic[978].strpic {
                    "HP:\v[706]/\v[705]"
                    .pos v[341], v[342] .topLeft
                    .size 0, 0                    .chromakey 1
                    .scale 100
                    .trans 0
                    .rgbs 100, 100, 100, 100
                    .font t[530], 11 .noShadow
                    .spacing 0, 0
                    .skin "" .nobg .noframe .noGradation .noPadding
                    .mapLayer 8
                    .eraseWhenTransfer
                    .affectedByFlash
                    .affectedByShake
                }
                v[1971] = v[706]
                
            }
            v[341] += 72
            @if v[711] != v[1972] {
                @pic[1799].strpic {
                    "AR:\v[711]/\v[738]"
                    .pos v[341], v[342] .topLeft
                    .size 0, 0                    .chromakey 1
                    .scale 100
                    .trans 0
                    .rgbs 100, 100, 100, 100
                    .font t[530], 11 .noShadow
                    .spacing 0, 0
                    .skin "" .nobg .noframe .noGradation .noPadding
                    .mapLayer 8
                    .eraseWhenTransfer
                    .affectedByFlash
                    .affectedByShake
                }
                v[1972] = v[711]
                
            }
            v[341] += 75
            @if v[708] != v[1973] {
                @pic[979].strpic {
                    "SP:\v[708]/\v[707]"
                    .pos v[341], v[342] .topLeft
                    .size 0, 0                    .chromakey 1
                    .scale 100
                    .trans 0
                    .rgbs 100, 100, 100, 100
                    .font t[530], 11 .noShadow
                    .spacing 0, 0
                    .skin "" .nobg .noframe .noGradation .noPadding
                    .mapLayer 8
                    .eraseWhenTransfer
                    .affectedByFlash
                    .affectedByShake
                }
                v[1973] = v[708]
                
            }
            v[341] = v[1296] + 16
            v[342] = v[1297] + 21
            @pic[975].show {
                "HP_bar_main"
                .pos v[341], v[342] .left
                .chromakey 0
                .scale 100
                .trans 0
                .rgbs 100, 100, 100, 100
                .grid 1, 50 .cell v[306]
                .mapLayer 8
                .eraseWhenTransfer
                .affectedByFlash
                .affectedByShake
            }
            @comment "処理終わり"
            @comment "ARバーびよ～ん"
            @comment "処理開始"
            v[306] = v[711] * 100
            @comment "#0除算防止"
            v[305] = max(v[738], 1)
            v[306] /= v[305] * 2
            v[306] = max(v[306], 1)
            v[341] += 72
            @pic[1800].show {
                "ui\AR_bar_main"
                .pos v[341], v[342] .left
                .chromakey 0
                .scale 100
                .trans 0
                .rgbs 100, 100, 100, 100
                .grid 1, 50 .cell v[306]
                .mapLayer 8
                .eraseWhenTransfer
                .affectedByFlash
                .affectedByShake
            }
            @comment "MPある？"
            @if v[707] > 0 {
                @comment "MPバーびよ～ん"
                @comment "処理開始"
                v[306] = v[708] * 100
                @comment "#0除算防止"
                v[305] = max(v[707], 1)
                v[306] /= v[305] * 2
                v[306] = max(v[306], 1)
                v[341] += 72
                @pic[976].show {
                    "MP_bar_main"
                    .pos v[341], v[342] .left
                    .chromakey 0
                    .scale 100
                    .trans 0
                    .rgbs 100, 100, 100, 100
                    .grid 1, 50 .cell v[306]
                    .mapLayer 8
                    .eraseWhenTransfer
                    .affectedByFlash
                    .affectedByShake
                }
                @comment "処理終わり"
                
            } .else bl {
                @pic[976].move {
                    .pos 179, 226 .center
                    .scale 100
                    .trans 100
                    .time 0
                    .rgbs 100, 100, 100, 100
                }
                
            }
            
        } .else bl {
            @comment "選択中のObjが撃破されている"
            v[81] = 0
            
        }
        v[81] = v[v[101] * 300 + 4701] <= 0 ? 0 : v[81]
        @if v[81] != 0 {
            @comment "SkillCheck"
            v[325] += 36
            v[v[325]].copy v[741], 100
            v[325] -= 46
            v[v[325]].copy v[695], 4
            @if s[29] .isOff() {
                @comment "Q"
                v[349] = v[695] * 110
                v[349] /= v[748]
                v[349] /= 11
                v[349] += 2
                v[349] = v[349] <= 0 ? 1 : v[349]
                v[1037].copy v[351], 2
                v[350] = v[4556]
                v[353] = 760 + (v[350] - v[4556]) * 20
                @if v[741] > 0 {
                    @pic[982].show {
                        "skill_icon\skill_1" .repl 1 v[743]
                        .pos v[1037], v[1038] .center
                        .chromakey 1
                        .scale 100
                        .trans 50
                        .rgbs 100, 100, 100, 100
                        .grid 11, 1 .cell v[349]
                        .mapLayer 8
                        .eraseWhenTransfer
                        .affectedByFlash
                        .affectedByShake
                    }
                    @if `(v[v[353]] & 33) == 1 {
                        @pic[v[350]].show {
                            "StaticIcon"
                            .pos v[351], v[352] .center
                            .chromakey 1
                            .scale 100
                            .trans 25
                            .rgbs 100, 100, 100, 100
                            .grid 8, 1 .cell 8
                            .mapLayer 9
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    } .else bl {
                        @pic[v[350]].show {
                            "StaticIcon"
                            .pos v[351], v[352] .center
                            .chromakey 1
                            .scale 100
                            .trans 100
                            .rgbs 100, 100, 100, 100
                            .grid 8, 1 .cell 8
                            .mapLayer 9
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    }
                    
                } .else bl {
                    @pic[982].move {
                        .pos v[1037], v[1038] .center
                        .scale 100
                        .trans 100
                        .time 0
                        .rgbs 100, 100, 100, 100
                    }
                    @pic[v[350]].show {
                        "StaticIcon"
                        .pos v[351], v[352] .center
                        .chromakey 1
                        .scale 100
                        .trans 100
                        .rgbs 100, 100, 100, 100
                        .grid 8, 1 .cell 8
                        .mapLayer 9
                        .affectedByFlash
                        .affectedByShake
                    }
                    
                }
                @comment "W"
                v[349] = v[696] * 110
                v[349] /= v[768]
                v[349] /= 11
                v[349] += 2
                v[349] = v[349] <= 0 ? 1 : v[349]
                v[350] += 1
                v[1039].copy v[351], 2
                v[353] = 760 + (v[350] - v[4556]) * 20
                @if v[761] > 0 {
                    @pic[983].show {
                        "skill_icon\skill_1" .repl 1 v[763]
                        .pos v[1039], v[1040] .center
                        .chromakey 1
                        .scale 100
                        .trans 50
                        .rgbs 100, 100, 100, 100
                        .grid 11, 1 .cell v[349]
                        .mapLayer 8
                        .eraseWhenTransfer
                        .affectedByFlash
                        .affectedByShake
                    }
                    @if `(v[v[353]] & 33) == 1 {
                        @pic[v[350]].show {
                            "StaticIcon"
                            .pos v[351], v[352] .center
                            .chromakey 1
                            .scale 100
                            .trans 25
                            .rgbs 100, 100, 100, 100
                            .grid 8, 1 .cell 8
                            .mapLayer 9
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    } .else bl {
                        @pic[v[350]].show {
                            "StaticIcon"
                            .pos v[351], v[352] .center
                            .chromakey 1
                            .scale 100
                            .trans 100
                            .rgbs 100, 100, 100, 100
                            .grid 8, 1 .cell 8
                            .mapLayer 9
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    }
                    
                } .else bl {
                    @pic[983].move {
                        .pos v[1039], v[1040] .center
                        .scale 100
                        .trans 100
                        .time 0
                        .rgbs 100, 100, 100, 100
                    }
                    @pic[v[350]].show {
                        "StaticIcon"
                        .pos v[351], v[352] .center
                        .chromakey 1
                        .scale 100
                        .trans 100
                        .rgbs 100, 100, 100, 100
                        .grid 8, 1 .cell 8
                        .mapLayer 9
                        .affectedByFlash
                        .affectedByShake
                    }
                    
                }
                @comment "E"
                v[349] = v[697] * 110
                v[349] /= v[788]
                v[349] /= 11
                v[349] += 2
                v[349] = v[349] <= 0 ? 1 : v[349]
                v[350] += 1
                v[1041].copy v[351], 2
                v[353] = 760 + (v[350] - v[4556]) * 20
                @if v[781] > 0 {
                    @pic[984].show {
                        "skill_icon\skill_1" .repl 1 v[783]
                        .pos v[1041], v[1042] .center
                        .chromakey 1
                        .scale 100
                        .trans 50
                        .rgbs 100, 100, 100, 100
                        .grid 11, 1 .cell v[349]
                        .mapLayer 8
                        .eraseWhenTransfer
                        .affectedByFlash
                        .affectedByShake
                    }
                    @if `(v[v[353]] & 33) == 1 {
                        @pic[v[350]].show {
                            "StaticIcon"
                            .pos v[351], v[352] .center
                            .chromakey 1
                            .scale 100
                            .trans 25
                            .rgbs 100, 100, 100, 100
                            .grid 8, 1 .cell 8
                            .mapLayer 9
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    } .else bl {
                        @pic[v[350]].show {
                            "StaticIcon"
                            .pos v[351], v[352] .center
                            .chromakey 1
                            .scale 100
                            .trans 100
                            .rgbs 100, 100, 100, 100
                            .grid 8, 1 .cell 8
                            .mapLayer 9
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    }
                    
                } .else bl {
                    @pic[984].move {
                        .pos v[1041], v[1042] .center
                        .scale 100
                        .trans 100
                        .time 0
                        .rgbs 100, 100, 100, 100
                    }
                    @pic[v[350]].show {
                        "StaticIcon"
                        .pos v[351], v[352] .center
                        .chromakey 1
                        .scale 100
                        .trans 100
                        .rgbs 100, 100, 100, 100
                        .grid 8, 1 .cell 8
                        .mapLayer 9
                        .affectedByFlash
                        .affectedByShake
                    }
                    
                }
                @comment "R"
                v[349] = v[698] * 110
                v[349] /= v[808]
                v[349] /= 11
                v[349] += 2
                v[349] = v[349] <= 0 ? 1 : v[349]
                v[350] += 1
                v[1043].copy v[351], 2
                v[353] = 760 + (v[350] - v[4556]) * 20
                @if v[801] > 0 {
                    @pic[985].show {
                        "skill_icon\skill_1" .repl 1 v[803]
                        .pos v[1043], v[1044] .center
                        .chromakey 1
                        .scale 100
                        .trans 50
                        .rgbs 100, 100, 100, 100
                        .grid 11, 1 .cell v[349]
                        .mapLayer 8
                        .eraseWhenTransfer
                        .affectedByFlash
                        .affectedByShake
                    }
                    @if `(v[v[353]] & 33) == 1 {
                        @pic[v[350]].show {
                            "StaticIcon"
                            .pos v[351], v[352] .center
                            .chromakey 1
                            .scale 100
                            .trans 25
                            .rgbs 100, 100, 100, 100
                            .grid 8, 1 .cell 8
                            .mapLayer 9
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    } .else bl {
                        @pic[v[350]].show {
                            "StaticIcon"
                            .pos v[351], v[352] .center
                            .chromakey 1
                            .scale 100
                            .trans 100
                            .rgbs 100, 100, 100, 100
                            .grid 8, 1 .cell 8
                            .mapLayer 9
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    }
                    
                } .else bl {
                    @pic[985].move {
                        .pos v[1041], v[1042] .center
                        .scale 100
                        .trans 100
                        .time 0
                        .rgbs 100, 100, 100, 100
                    }
                    @pic[v[350]].show {
                        "StaticIcon"
                        .pos v[351], v[352] .center
                        .chromakey 1
                        .scale 100
                        .trans 100
                        .rgbs 100, 100, 100, 100
                        .grid 8, 1 .cell 8
                        .mapLayer 9
                        .affectedByFlash
                        .affectedByShake
                    }
                    
                }
                @comment "Terrain"
                v[350] = v[1127] * -4
                v[350] += v[1125]
                v[13] = v[v[101] * 300 + 4703]
                @if `v[13] & 9 {
                    v[21] = 2
                    v[325] = 10
                    
                } .else bl {
                    @if `v[13] & 2 {
                        v[21] = 1
                        v[325] = 10
                        
                    } .else bl {
                        v[325] = 100
                        
                    }
                    
                }
                @pic[1795].show {
                    "ui\terrainicon"
                    .pos v[350], v[1126] .bottom
                    .chromakey 1
                    .scale 100
                    .trans v[325]
                    .rgbs 100, 100, 100, 100
                    .grid 8, 5 .cell v[21]
                    .mapLayer 8
                    .affectedByShake
                }
                @comment "Tactical Order"
                v[350] = v[1127] * -3
                v[350] += v[1125]
                v[13] = v[v[101] * 300 + 4948]
                v[325] = v[13] != 0 ? 10 : 100
                @while v[13] >= 1 .dst v[12] {
                    v[13] /= 2
                    
                }
                
                v[21] = [18, 17, 17, 22, 23, 17, 33][v[12]]
                @pic[1796].show {
                    "ui\bufficon"
                    .pos v[350], v[1126] .bottom
                    .chromakey 1
                    .scale 100
                    .trans v[325]
                    .rgbs 100, 100, 100, 100
                    .grid 8, 5 .cell v[21]
                    .mapLayer 8
                    .affectedByShake
                }
                
            }
            @comment "Passive"
            @if v[822] >= 0 {
                v[341] = v[1287] + v[1289] / 2 + 1
                v[342] = v[1288] + v[1290] / 2
                @pic[995].show {
                    "passive_icon\picon_0" .repl 1 v[822]
                    .pos v[341], v[342] .center
                    .chromakey 1
                    .scale 100
                    .trans 0
                    .rgbs 100, 100, 100, 100
                    .mapLayer 8
                    .eraseWhenTransfer
                    .affectedByFlash
                    .affectedByShake
                }
                
            } .else bl {
                @pic[995].move {
                    .pos v[1041], v[1042] .center
                    .scale 100
                    .trans 100
                    .time 0
                    .rgbs 100, 100, 100, 100
                }
                
            }
            //@comment "Morale"
            v[350] = v[1127] * -2
            v[350] += v[1125]
            v[325] = v[v[101] * 300 + 4960] != 0 ? 10 : 100
            v[21] = v[v[101] * 300 + 4960] < 0 ? 29 : 24 + v[v[101] * 300 + 4960]
            @pic[1797].show {
                "ui\bufficon"
                .pos v[350], v[1126] .bottom
                .chromakey 1
                .scale 100
                .trans v[325]
                .rgbs 100, 100, 100, 100
                .grid 8, 5 .cell v[21]
                .mapLayer 8
                .affectedByShake
            }
            @comment "Melee Penalty"
            v[350] = v[1127] * -1
            v[350] += v[1125]
            v[325] = v[v[101] * 300 + 4781] > 0 ? 10 : 100
            @pic[1798].show {
                "ui\bufficon"
                .pos v[350], v[1126] .bottom
                .chromakey 1
                .scale 100
                .trans v[325]
                .rgbs 100, 100, 100, 100
                .grid 8, 5 .cell 19
                .mapLayer 8
                .affectedByShake
            }
            @comment "Buffs"
            @loop 8 .dst v[235] {
                v[325] = v[101] * 300
                v[325] += 4771 + v[235]
                v[350] = v[1127] * v[235]
                v[350] += v[1125]
                v[235] += 987
                @if v[v[325]] > 0 {
                    v[21] = 40
                    @comment "###############"
                    @comment "Init"
                    t[3000..3300] .asg ""
                    @comment "Load"
                    v[1961] = v[4573] + v[v[325]] - 1111
                    t[3000] .asg t[v[1961]] .extract
                    t[3000] .split "@", t[3000], v[1961]
                    @comment "###############"
                    t[3001] .toNum v[21]
                    @pic[v[235]].show {
                        "ui\bufficon"
                        .pos v[350], v[1126] .bottom
                        .chromakey 1
                        .scale 100
                        .trans 10
                        .rgbs 100, 100, 100, 100
                        .grid 8, 5 .cell v[21]
                        .mapLayer 8
                        .affectedByShake
                    }
                    
                } .else bl {
                    @pic[v[235]].show {
                        "ui\bufficon"
                        .pos v[350], v[1126] .bottom
                        .chromakey 1
                        .scale 100
                        .trans 100
                        .rgbs 100, 100, 100, 100
                        .grid 8, 5 .cell 1
                        .mapLayer 8
                        .affectedByShake
                    }
                    
                }
                
            }
            
            @if s[29] .isOn() {
                s[204].off
                @if v[557] > 0 {
                    s[204].on
                    @call .cev 797
                    s[204].off
                    
                }
                
            }
            
        }
        @wait 0
        
    }
    @if v[81] == 2 {
        v[202] = 101
        v[302..303] = 0
        @loop .inf() {
            @if v[v[202]] == 0 {
                //@comment "とぎれた"
                @break
                
            }
            @if v[202] > v[1007] {
                //@comment "とりあえず40体までしか選択できない"
                @break
                
            }
            //@comment "配列ゲット"
            v[301] = v[v[202]] * 300
            v[301] += 4700
            v[300] = v[301] + 1
            @if v[v[300]] >= 1 {
                //@comment "生存してる数をゲット"
                v[302] += 1
                v[299] = v[301] + 106
                //@comment "ＨＰゲット"
                v[303] += v[v[299]]
                
            }
            v[202] += 1
            
        }
        
        //@comment "損耗率計算"
        v[306] = v[303] * 100
        //@comment "#0除算防止"
        v[305] = max(v[98], 1)
        v[306] /= v[305]
        v[307] = v[306]
        v[306] /= 2
        v[306] = max(v[306], 1)
        //@comment "Set pos"
        v[341] = v[1296] + 116
        v[342] = v[1297] + 12
        @pic[975].show {
            "HP_bar_main"
            .pos v[341], v[342] .center
            .chromakey 0
            .scale 100
            .trans 0
            .rgbs 100, 100, 100, 100
            .grid 1, 50 .cell v[306]
            .mapLayer 8
            .eraseWhenTransfer
            .affectedByFlash
            .affectedByShake
        }
        @if v[302] <= 0 {
            @comment "全滅！"
            v[81] = 0
            @ev.abort
            
        }
        @if `v[1971] != v[302] || v[1972] != v[307] {
            @pic[979].strpic {
                " \t[20141]:\v[302]/\v[99] \t[20144]::\v[307]%"
                .pos v[1296], v[1297] .topLeft
                .size 200, 24                .chromakey 1
                .scale 100
                .trans 0
                .rgbs 100, 100, 100, 100
                .font t[530], 11 .noShadow
                .spacing 0, 0
                .skin "" .nobg .noframe .noGradation .noPadding
                .mapLayer 8
                .eraseWhenTransfer
                .affectedByFlash
                .affectedByShake
            }
            
        }
        v[1971] = v[302]
        v[1972] = v[307]
        @pic[995].move {
            .pos v[1041], v[1042] .center
            .scale 100
            .trans 100
            .time 0
            .rgbs 100, 100, 100, 100
        }
        @comment "SkillCheck"
        v[325] = v[101] * 300
        v[325] += 4841
        v[v[325]].copy v[741], 100
        @if s[29] .isOff() {
            @if s[24] .isOn() {
                v[325] -= 46
                v[v[325]].copy v[695], 4
                @if `v[v[101] * 300 + 4701] > 0 {
                    @comment "Q"
                    v[349] = 1
                    v[350] = v[4556]
                    v[1037].copy v[351], 2
                    v[353] = 760 + (v[350] - v[4556]) * 20
                    @if v[741] > 0 {
                        @pic[982].show {
                            "skill_icon\skill_1" .repl 1 v[743]
                            .pos v[1037], v[1038] .center
                            .chromakey 1
                            .scale 100
                            .trans 50
                            .rgbs 100, 100, 100, 100
                            .grid 11, 1 .cell v[349]
                            .mapLayer 8
                            .eraseWhenTransfer
                            .affectedByFlash
                            .affectedByShake
                        }
                        @if `(v[v[353]] & 33) == 1 {
                            @pic[v[350]].show {
                                "StaticIcon"
                                .pos v[351], v[352] .center
                                .chromakey 1
                                .scale 100
                                .trans 25
                                .rgbs 100, 100, 100, 100
                                .grid 8, 1 .cell 8
                                .mapLayer 9
                                .affectedByFlash
                                .affectedByShake
                            }
                            
                        } .else bl {
                            @pic[v[350]].show {
                                "StaticIcon"
                                .pos v[351], v[352] .center
                                .chromakey 1
                                .scale 100
                                .trans 100
                                .rgbs 100, 100, 100, 100
                                .grid 8, 1 .cell 8
                                .mapLayer 9
                                .affectedByFlash
                                .affectedByShake
                            }
                            
                        }
                        
                    } .else bl {
                        @pic[982].move {
                            .pos v[1037], v[1038] .center
                            .scale 100
                            .trans 100
                            .time 0
                            .rgbs 100, 100, 100, 100
                        }
                        @pic[v[350]].show {
                            "StaticIcon"
                            .pos v[351], v[352] .center
                            .chromakey 1
                            .scale 100
                            .trans 100
                            .rgbs 100, 100, 100, 100
                            .grid 8, 1 .cell 8
                            .mapLayer 9
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    }
                    @comment "W"
                    v[349] = 1
                    v[350] += 1
                    v[1039].copy v[351], 2
                    v[353] = 760 + (v[350] - v[4556]) * 20
                    @if v[761] > 0 {
                        @pic[983].show {
                            "skill_icon\skill_1" .repl 1 v[763]
                            .pos v[1039], v[1040] .center
                            .chromakey 1
                            .scale 100
                            .trans 50
                            .rgbs 100, 100, 100, 100
                            .grid 11, 1 .cell v[349]
                            .mapLayer 8
                            .eraseWhenTransfer
                            .affectedByFlash
                            .affectedByShake
                        }
                        @if `(v[v[353]] & 33) == 1 {
                            @pic[v[350]].show {
                                "StaticIcon"
                                .pos v[351], v[352] .center
                                .chromakey 1
                                .scale 100
                                .trans 25
                                .rgbs 100, 100, 100, 100
                                .grid 8, 1 .cell 8
                                .mapLayer 9
                                .affectedByFlash
                                .affectedByShake
                            }
                            
                        } .else bl {
                            @pic[v[350]].show {
                                "StaticIcon"
                                .pos v[351], v[352] .center
                                .chromakey 1
                                .scale 100
                                .trans 100
                                .rgbs 100, 100, 100, 100
                                .grid 8, 1 .cell 8
                                .mapLayer 9
                                .affectedByFlash
                                .affectedByShake
                            }
                            
                        }
                        
                    } .else bl {
                        @pic[983].move {
                            .pos v[1039], v[1040] .center
                            .scale 100
                            .trans 100
                            .time 0
                            .rgbs 100, 100, 100, 100
                        }
                        @pic[v[350]].show {
                            "StaticIcon"
                            .pos v[351], v[352] .center
                            .chromakey 1
                            .scale 100
                            .trans 100
                            .rgbs 100, 100, 100, 100
                            .grid 8, 1 .cell 8
                            .mapLayer 9
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    }
                    @comment "E"
                    v[349] = 1
                    v[350] += 1
                    v[1041].copy v[351], 2
                    v[353] = 760 + (v[350] - v[4556]) * 20
                    @if v[781] > 0 {
                        @pic[984].show {
                            "skill_icon\skill_1" .repl 1 v[783]
                            .pos v[1041], v[1042] .center
                            .chromakey 1
                            .scale 100
                            .trans 50
                            .rgbs 100, 100, 100, 100
                            .grid 11, 1 .cell v[349]
                            .mapLayer 8
                            .eraseWhenTransfer
                            .affectedByFlash
                            .affectedByShake
                        }
                        @if `(v[v[353]] & 33) == 1 {
                            @pic[v[350]].show {
                                "StaticIcon"
                                .pos v[351], v[352] .center
                                .chromakey 1
                                .scale 100
                                .trans 25
                                .rgbs 100, 100, 100, 100
                                .grid 8, 1 .cell 8
                                .mapLayer 9
                                .affectedByFlash
                                .affectedByShake
                            }
                            
                        } .else bl {
                            @pic[v[350]].show {
                                "StaticIcon"
                                .pos v[351], v[352] .center
                                .chromakey 1
                                .scale 100
                                .trans 100
                                .rgbs 100, 100, 100, 100
                                .grid 8, 1 .cell 8
                                .mapLayer 9
                                .affectedByFlash
                                .affectedByShake
                            }
                            
                        }
                        
                    } .else bl {
                        @pic[984].move {
                            .pos v[1041], v[1042] .center
                            .scale 100
                            .trans 100
                            .time 0
                            .rgbs 100, 100, 100, 100
                        }
                        @pic[v[350]].show {
                            "StaticIcon"
                            .pos v[351], v[352] .center
                            .chromakey 1
                            .scale 100
                            .trans 100
                            .rgbs 100, 100, 100, 100
                            .grid 8, 1 .cell 8
                            .mapLayer 9
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    }
                    @comment "R"
                    v[349] = 1
                    v[350] += 1
                    v[1043].copy v[351], 2
                    v[353] = 760 + (v[350] - v[4556]) * 20
                    @if v[801] > 0 {
                        @pic[985].show {
                            "skill_icon\skill_1" .repl 1 v[803]
                            .pos v[1043], v[1044] .center
                            .chromakey 1
                            .scale 100
                            .trans 50
                            .rgbs 100, 100, 100, 100
                            .grid 11, 1 .cell v[349]
                            .mapLayer 8
                            .eraseWhenTransfer
                            .affectedByFlash
                            .affectedByShake
                        }
                        @if `(v[v[353]] & 33) == 1 {
                            @pic[v[350]].show {
                                "StaticIcon"
                                .pos v[351], v[352] .center
                                .chromakey 1
                                .scale 100
                                .trans 25
                                .rgbs 100, 100, 100, 100
                                .grid 8, 1 .cell 8
                                .mapLayer 9
                                .affectedByFlash
                                .affectedByShake
                            }
                            
                        } .else bl {
                            @pic[v[350]].show {
                                "StaticIcon"
                                .pos v[351], v[352] .center
                                .chromakey 1
                                .scale 100
                                .trans 100
                                .rgbs 100, 100, 100, 100
                                .grid 8, 1 .cell 8
                                .mapLayer 9
                                .affectedByFlash
                                .affectedByShake
                            }
                            
                        }
                        
                    } .else bl {
                        @pic[985].move {
                            .pos v[1041], v[1042] .center
                            .scale 100
                            .trans 100
                            .time 0
                            .rgbs 100, 100, 100, 100
                        }
                        @pic[v[350]].show {
                            "StaticIcon"
                            .pos v[351], v[352] .center
                            .chromakey 1
                            .scale 100
                            .trans 100
                            .rgbs 100, 100, 100, 100
                            .grid 8, 1 .cell 8
                            .mapLayer 9
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    }
                    
                }
                @comment "Terrain"
                v[350] = v[1127] * -4
                v[350] += v[1125]
                v[13] = v[v[101] * 300 + 4703]
                @if `v[13] & 9 {
                    v[21] = 2
                    v[325] = 10
                    
                } .else bl {
                    @if `v[13] & 2 {
                        v[21] = 1
                        v[325] = 10
                        
                    } .else bl {
                        v[325] = 100
                        
                    }
                    
                }
                @pic[1795].show {
                    "ui\terrainicon"
                    .pos v[350], v[1126] .bottom
                    .chromakey 1
                    .scale 100
                    .trans v[325]
                    .rgbs 100, 100, 100, 100
                    .grid 8, 5 .cell v[21]
                    .mapLayer 8
                    .affectedByShake
                }
                @comment "Tactical Order"
                v[350] = v[1127] * -3
                v[350] += v[1125]
                v[13] = v[v[101] * 300 + 4948]
                v[325] = v[13] != 0 ? 10 : 100
                @while v[13] >= 1 .dst v[12] {
                    v[13] /= 2
                    
                }
                
                v[21] = [18, 17, 17, 22, 23, 17, 33][v[12]]
                @pic[1796].show {
                    "ui\bufficon"
                    .pos v[350], v[1126] .bottom
                    .chromakey 1
                    .scale 100
                    .trans v[325]
                    .rgbs 100, 100, 100, 100
                    .grid 8, 5 .cell v[21]
                    .mapLayer 8
                    .affectedByShake
                }
                
            } .else bl {
                v[325] -= 46
                v[v[325]].copy v[695], 4
                @comment "Q"
                v[350] = v[4556]
                v[1037].copy v[351], 2
                v[353] = 760 + (v[350] - v[4556]) * 20
                @if v[741] > 0 {
                    @if `(v[v[353]] & 33) == 1 {
                        @pic[v[350]].show {
                            "StaticIcon"
                            .pos v[351], v[352] .center
                            .chromakey 1
                            .scale 100
                            .trans 25
                            .rgbs 100, 100, 100, 100
                            .grid 8, 1 .cell 8
                            .mapLayer 9
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    } .else bl {
                        @pic[v[350]].show {
                            "StaticIcon"
                            .pos v[351], v[352] .center
                            .chromakey 1
                            .scale 100
                            .trans 100
                            .rgbs 100, 100, 100, 100
                            .grid 8, 1 .cell 8
                            .mapLayer 9
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    }
                    
                } .else bl {
                    @pic[v[350]].show {
                        "StaticIcon"
                        .pos v[351], v[352] .center
                        .chromakey 1
                        .scale 100
                        .trans 100
                        .rgbs 100, 100, 100, 100
                        .grid 8, 1 .cell 8
                        .mapLayer 9
                        .affectedByFlash
                        .affectedByShake
                    }
                    
                }
                @comment "W"
                v[350] += 1
                v[1039].copy v[351], 2
                v[353] = 760 + (v[350] - v[4556]) * 20
                @if v[761] > 0 {
                    @if `(v[v[353]] & 33) == 1 {
                        @pic[v[350]].show {
                            "StaticIcon"
                            .pos v[351], v[352] .center
                            .chromakey 1
                            .scale 100
                            .trans 25
                            .rgbs 100, 100, 100, 100
                            .grid 8, 1 .cell 8
                            .mapLayer 9
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    } .else bl {
                        @pic[v[350]].show {
                            "StaticIcon"
                            .pos v[351], v[352] .center
                            .chromakey 1
                            .scale 100
                            .trans 100
                            .rgbs 100, 100, 100, 100
                            .grid 8, 1 .cell 8
                            .mapLayer 9
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    }
                    
                } .else bl {
                    @pic[v[350]].show {
                        "StaticIcon"
                        .pos v[351], v[352] .center
                        .chromakey 1
                        .scale 100
                        .trans 100
                        .rgbs 100, 100, 100, 100
                        .grid 8, 1 .cell 8
                        .mapLayer 9
                        .affectedByFlash
                        .affectedByShake
                    }
                    
                }
                @comment "E"
                v[350] += 1
                v[1041].copy v[351], 2
                v[353] = 760 + (v[350] - v[4556]) * 20
                @if v[781] > 0 {
                    @if `(v[v[353]] & 33) == 1 {
                        @pic[v[350]].show {
                            "StaticIcon"
                            .pos v[351], v[352] .center
                            .chromakey 1
                            .scale 100
                            .trans 25
                            .rgbs 100, 100, 100, 100
                            .grid 8, 1 .cell 8
                            .mapLayer 9
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    } .else bl {
                        @pic[v[350]].show {
                            "StaticIcon"
                            .pos v[351], v[352] .center
                            .chromakey 1
                            .scale 100
                            .trans 100
                            .rgbs 100, 100, 100, 100
                            .grid 8, 1 .cell 8
                            .mapLayer 9
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    }
                    
                } .else bl {
                    @pic[v[350]].show {
                        "StaticIcon"
                        .pos v[351], v[352] .center
                        .chromakey 1
                        .scale 100
                        .trans 100
                        .rgbs 100, 100, 100, 100
                        .grid 8, 1 .cell 8
                        .mapLayer 9
                        .affectedByFlash
                        .affectedByShake
                    }
                    
                }
                @comment "R"
                v[350] += 1
                v[1043].copy v[351], 2
                v[353] = 760 + (v[350] - v[4556]) * 20
                @if v[801] > 0 {
                    @if `(v[v[353]] & 33) == 1 {
                        @pic[v[350]].show {
                            "StaticIcon"
                            .pos v[351], v[352] .center
                            .chromakey 1
                            .scale 100
                            .trans 25
                            .rgbs 100, 100, 100, 100
                            .grid 8, 1 .cell 8
                            .mapLayer 9
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    } .else bl {
                        @pic[v[350]].show {
                            "StaticIcon"
                            .pos v[351], v[352] .center
                            .chromakey 1
                            .scale 100
                            .trans 100
                            .rgbs 100, 100, 100, 100
                            .grid 8, 1 .cell 8
                            .mapLayer 9
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    }
                    
                } .else bl {
                    @pic[v[350]].show {
                        "StaticIcon"
                        .pos v[351], v[352] .center
                        .chromakey 1
                        .scale 100
                        .trans 100
                        .rgbs 100, 100, 100, 100
                        .grid 8, 1 .cell 8
                        .mapLayer 9
                        .affectedByFlash
                        .affectedByShake
                    }
                    
                }
                @pic[1796].show {
                    "ui\bufficon"
                    .pos v[350], v[1126] .bottom
                    .chromakey 1
                    .scale 100
                    .trans 100
                    .rgbs 100, 100, 100, 100
                    .grid 8, 5 .cell v[21]
                    .mapLayer 8
                    .affectedByShake
                }
                
            }
            
        }
        @comment "Passive"
        @if s[31] .isOn() {
            v[341] = v[1287] + v[1289] / 2 + 1
            v[342] = v[1288] + v[1290] / 2
            @pic[995].show {
                "passive_icon\picon_0" .repl 1 v[822]
                .pos v[341], v[342] .center
                .chromakey 1
                .scale 100
                .trans 0
                .rgbs 100, 100, 100, 100
                .mapLayer 8
                .eraseWhenTransfer
                .affectedByFlash
                .affectedByShake
            }
            
        } .else bl {
            v[341] = v[1287] + v[1289] / 2 + 1
            v[342] = v[1288] + v[1290] / 2
            @pic[995].show {
                "passive_icon\picon_0" .repl 1 v[483]
                .pos v[341], v[342] .center
                .chromakey 1
                .scale 100
                .trans 0
                .rgbs 100, 100, 100, 100
                .mapLayer 8
                .eraseWhenTransfer
                .affectedByFlash
                .affectedByShake
            }
            
        }
        @comment "Disable Buff icons"
        @loop 8 .dst v[235] {
            v[341] = v[1127] * v[235]
            v[341] += v[1125]
            v[235] += 987
            @pic[v[235]].show {
                "ui\bufficon"
                .pos v[341], v[1126] .bottom
                .chromakey 1
                .scale 100
                .trans 100
                .rgbs 100, 100, 100, 100
                .grid 8, 5 .cell 1
                .mapLayer 8
                .affectedByShake
            }
            
        }
        
        @if s[29] .isOn() {
            s[204].off
            @if v[557] > 0 {
                v[700] = 0
                s[204].on
                @call .cev 797
                s[204].off
                
            }
            
        }
        @wait 0
        
    }
    @comment "単体ステータス敵"
    @if v[81] == 3 {
        v[341] = v[4556]
        @loop 4 {
            @pic[v[341]].move {
                .pos 0, 0 .topLeft
                .scale 0
                .trans 100
                .time 0
                .keepRgbs
                .keepEffect
                .keepFlip
            }
            v[341] += 1
            
        }
        
        v[325] = v[100] * 300
        v[325] += 4802
        v[v[325]].copy v[702], 38
        v[325] += 3
        @if v[706] > 0 {
            @comment "処理開始"
            v[306] = v[706] * 100
            @comment "#0除算防止"
            v[305] = max(v[705], 1)
            v[306] /= v[305] * 2
            v[306] = max(v[306], 2)
            v[306] = min(v[306], 50)
            v[341] = v[1296] + 3
            v[342] = v[1297] + 11
            @if v[706] != v[1971] {
                @pic[978].strpic {
                    "HP:\v[706]/\v[705]"
                    .pos v[341], v[342] .topLeft
                    .size 0, 0                    .chromakey 1
                    .scale 100
                    .trans 0
                    .rgbs 100, 100, 100, 100
                    .font t[530], 11 .noShadow
                    .spacing 0, 0
                    .skin "" .nobg .noframe .noGradation .noPadding
                    .mapLayer 8
                    .eraseWhenTransfer
                    .affectedByFlash
                    .affectedByShake
                }
                v[1971] = v[706]
                
            }
            v[341] += 72
            @if v[711] != v[1972] {
                @pic[1799].strpic {
                    "AR:\v[711]/\v[738]"
                    .pos v[341], v[342] .topLeft
                    .size 0, 0                    .chromakey 1
                    .scale 100
                    .trans 0
                    .rgbs 100, 100, 100, 100
                    .font t[530], 11 .noShadow
                    .spacing 0, 0
                    .skin "" .nobg .noframe .noGradation .noPadding
                    .mapLayer 8
                    .eraseWhenTransfer
                    .affectedByFlash
                    .affectedByShake
                }
                v[1972] = v[711]
                
            }
            v[341] += 75
            @if v[708] != v[1973] {
                @pic[979].strpic {
                    "SP:\v[708]/\v[707]"
                    .pos v[341], v[342] .topLeft
                    .size 0, 0                    .chromakey 1
                    .scale 100
                    .trans 0
                    .rgbs 100, 100, 100, 100
                    .font t[530], 11 .noShadow
                    .spacing 0, 0
                    .skin "" .nobg .noframe .noGradation .noPadding
                    .mapLayer 8
                    .eraseWhenTransfer
                    .affectedByFlash
                    .affectedByShake
                }
                v[1973] = v[708]
                
            }
            v[341] = v[1296] + 16
            v[342] = v[1297] + 21
            @pic[975].show {
                "HP_bar_main"
                .pos v[341], v[342] .left
                .chromakey 0
                .scale 100
                .trans 0
                .rgbs 100, 100, 100, 100
                .grid 1, 50 .cell v[306]
                .mapLayer 8
                .eraseWhenTransfer
                .affectedByFlash
                .affectedByShake
            }
            @comment "処理終わり"
            @comment "ARバーびよ～ん"
            @comment "処理開始"
            v[306] = v[711] * 100
            @comment "#0除算防止"
            v[305] = max(v[738], 1)
            v[306] /= v[305] * 2
            v[306] = max(v[306], 1)
            v[341] += 72
            @pic[1800].show {
                "ui\AR_bar_main"
                .pos v[341], v[342] .left
                .chromakey 0
                .scale 100
                .trans 0
                .rgbs 100, 100, 100, 100
                .grid 1, 50 .cell v[306]
                .mapLayer 8
                .eraseWhenTransfer
                .affectedByFlash
                .affectedByShake
            }
            @comment "MPある？"
            @if v[707] > 0 {
                @comment "MPバーびよ～ん"
                @comment "処理開始"
                v[306] = v[708] * 100
                @comment "#0除算防止"
                v[305] = max(v[707], 1)
                v[306] /= v[305] * 2
                v[306] = max(v[306], 1)
                v[341] += 72
                @pic[976].show {
                    "MP_bar_main"
                    .pos v[341], v[342] .left
                    .chromakey 0
                    .scale 100
                    .trans 0
                    .rgbs 100, 100, 100, 100
                    .grid 1, 50 .cell v[306]
                    .mapLayer 8
                    .eraseWhenTransfer
                    .affectedByFlash
                    .affectedByShake
                }
                @comment "処理終わり"
                
            } .else bl {
                @pic[976].move {
                    .pos 179, 226 .center
                    .scale 100
                    .trans 100
                    .time 0
                    .rgbs 100, 100, 100, 100
                }
                
            }
            
        } .else bl {
            @comment "選択中のObjが撃破されている"
            v[81] = 0
            
        }
        @if `v[v[100] * 300 + 4701] > 0 {
            @comment "SkillCheck"
            v[325] += 36
            v[v[325]].copy v[741], 100
            v[325] -= 46
            v[v[325]].copy v[695], 4
            @comment "Q"
            v[349] = v[695] * 110
            v[349] /= v[748]
            v[349] /= 11
            v[349] += 2
            v[349] = v[349] <= 0 ? 1 : v[349]
            @if v[741] > 0 {
                @pic[982].show {
                    "skill_icon\skill_1" .repl 1 v[743]
                    .pos v[1037], v[1038] .center
                    .chromakey 1
                    .scale 100
                    .trans 50
                    .rgbs 100, 100, 100, 100
                    .grid 11, 1 .cell v[349]
                    .mapLayer 8
                    .eraseWhenTransfer
                    .affectedByFlash
                    .affectedByShake
                }
                
            } .else bl {
                @pic[982].move {
                    .pos v[1037], v[1038] .center
                    .scale 100
                    .trans 100
                    .time 0
                    .rgbs 100, 100, 100, 100
                }
                
            }
            @comment "W"
            v[349] = v[696] * 110
            v[349] /= v[768]
            v[349] /= 11
            v[349] += 2
            v[349] = v[349] <= 0 ? 1 : v[349]
            @if v[761] > 0 {
                @pic[983].show {
                    "skill_icon\skill_1" .repl 1 v[763]
                    .pos v[1039], v[1040] .center
                    .chromakey 1
                    .scale 100
                    .trans 50
                    .rgbs 100, 100, 100, 100
                    .grid 11, 1 .cell v[349]
                    .mapLayer 8
                    .eraseWhenTransfer
                    .affectedByFlash
                    .affectedByShake
                }
                
            } .else bl {
                @pic[983].move {
                    .pos v[1039], v[1040] .center
                    .scale 100
                    .trans 100
                    .time 0
                    .rgbs 100, 100, 100, 100
                }
                
            }
            @comment "E"
            v[349] = v[697] * 110
            v[349] /= v[788]
            v[349] /= 11
            v[349] += 2
            v[349] = v[349] <= 0 ? 1 : v[349]
            @if v[781] > 0 {
                @pic[984].show {
                    "skill_icon\skill_1" .repl 1 v[783]
                    .pos v[1041], v[1042] .center
                    .chromakey 1
                    .scale 100
                    .trans 50
                    .rgbs 100, 100, 100, 100
                    .grid 11, 1 .cell v[349]
                    .mapLayer 8
                    .eraseWhenTransfer
                    .affectedByFlash
                    .affectedByShake
                }
                
            } .else bl {
                @pic[984].move {
                    .pos v[1041], v[1042] .center
                    .scale 100
                    .trans 100
                    .time 0
                    .rgbs 100, 100, 100, 100
                }
                
            }
            @comment "R"
            v[349] = v[698] * 110
            v[349] /= v[808]
            v[349] /= 11
            v[349] += 2
            v[349] = v[349] <= 0 ? 1 : v[349]
            @if v[801] > 0 {
                @pic[985].show {
                    "skill_icon\skill_1" .repl 1 v[803]
                    .pos v[1043], v[1044] .center
                    .chromakey 1
                    .scale 100
                    .trans 50
                    .rgbs 100, 100, 100, 100
                    .grid 11, 1 .cell v[349]
                    .mapLayer 8
                    .eraseWhenTransfer
                    .affectedByFlash
                    .affectedByShake
                }
                
            } .else bl {
                @pic[985].move {
                    .pos v[1041], v[1042] .center
                    .scale 100
                    .trans 100
                    .time 0
                    .rgbs 100, 100, 100, 100
                }
                
            }
            
        }
        @comment "Passive"
        @if v[822] > 0 {
            v[341] = v[1287] + v[1289] / 2 + 1
            v[342] = v[1288] + v[1290] / 2
            @pic[995].show {
                "passive_icon\picon_0" .repl 1 v[822]
                .pos v[341], v[342] .center
                .chromakey 1
                .scale 100
                .trans 0
                .rgbs 100, 100, 100, 100
                .mapLayer 8
                .eraseWhenTransfer
                .affectedByFlash
                .affectedByShake
            }
            
        } .else bl {
            @pic[985].move {
                .pos v[1041], v[1042] .center
                .scale 100
                .trans 100
                .time 0
                .rgbs 100, 100, 100, 100
            }
            
        }
        @comment "Terrain"
        v[350] = v[1127] * -4
        v[350] += v[1125]
        v[13] = v[v[100] * 300 + 4703]
        @if `v[13] & 9 {
            v[21] = 2
            v[325] = 10
            
        } .else bl {
            @if `v[13] & 2 {
                v[21] = 1
                v[325] = 10
                
            } .else bl {
                v[325] = 100
                
            }
            
        }
        @pic[1795].show {
            "ui\terrainicon"
            .pos v[350], v[1126] .bottom
            .chromakey 1
            .scale 100
            .trans v[325]
            .rgbs 100, 100, 100, 100
            .grid 8, 5 .cell v[21]
            .mapLayer 8
            .affectedByShake
        }
        @comment "Tactical Order"
        v[350] = v[1127] * -3
        v[350] += v[1125]
        v[13] = v[v[100] * 300 + 4948]
        v[325] = v[13] != 0 ? 10 : 100
        @while v[13] >= 1 .dst v[12] {
            v[13] /= 2
            
        }
        
        v[21] = [18, 17, 17, 22, 23, 17, 33][v[12]]
        @pic[1796].show {
            "ui\bufficon"
            .pos v[350], v[1126] .bottom
            .chromakey 1
            .scale 100
            .trans v[325]
            .rgbs 100, 100, 100, 100
            .grid 8, 5 .cell v[21]
            .mapLayer 8
            .affectedByShake
        }
        @comment "Morale"
        v[350] = v[1127] * -2
        v[350] += v[1125]
        v[325] = v[v[100] * 300 + 4960] != 0 ? 10 : 100
        v[21] = v[v[100] * 300 + 4960] < 0 ? 29 : 24 + v[v[100] * 300 + 4960]
        @pic[1797].show {
            "ui\bufficon"
            .pos v[350], v[1126] .bottom
            .chromakey 1
            .scale 100
            .trans v[325]
            .rgbs 100, 100, 100, 100
            .grid 8, 5 .cell v[21]
            .mapLayer 8
            .affectedByShake
        }
        @comment "Melee Penalty"
        v[350] = v[1127] * -1
        v[350] += v[1125]
        v[325] = v[v[100] * 300 + 4781] > 0 ? 10 : 100
        @pic[1798].show {
            "ui\bufficon"
            .pos v[350], v[1126] .bottom
            .chromakey 1
            .scale 100
            .trans v[325]
            .rgbs 100, 100, 100, 100
            .grid 8, 5 .cell 19
            .mapLayer 8
            .affectedByShake
        }
        @comment "Buffs"
        @loop 8 .dst v[235] {
            v[325] = v[100] * 300
            v[325] += 4771 + v[235]
            v[350] = v[1127] * v[235]
            v[350] += v[1125]
            v[235] += 987
            @if v[v[325]] > 0 {
                v[21] = 40
                @comment "###############"
                @comment "Init"
                t[3000..3300] .asg ""
                @comment "Load"
                v[1961] = v[4573] + v[v[325]] - 1111
                t[3000] .asg t[v[1961]] .extract
                t[3000] .split "@", t[3000], v[1961]
                @comment "###############"
                t[3001] .toNum v[21]
                @pic[v[235]].show {
                    "ui\bufficon"
                    .pos v[350], v[1126] .bottom
                    .chromakey 1
                    .scale 100
                    .trans 10
                    .rgbs 100, 100, 100, 100
                    .grid 8, 5 .cell v[21]
                    .mapLayer 8
                    .affectedByShake
                }
                
            } .else bl {
                @pic[v[235]].show {
                    "ui\bufficon"
                    .pos v[350], v[1126] .bottom
                    .chromakey 1
                    .scale 100
                    .trans 100
                    .rgbs 100, 100, 100, 100
                    .grid 8, 5 .cell 1
                    .mapLayer 8
                    .affectedByShake
                }
                
            }
            
        }
        
        @if s[1] .isOn() {
            @loop 8 .dst v[235] {
                v[325] = v[100] * 300
                v[325] += 4771 + v[235]
                v[350] = v[1127] * v[235]
                v[350] += v[1125]
                v[235] += 987
                @if v[v[325]] > 0 {
                    v[21] = 40
                    s[119].on
                    @call .cev v[v[325]]
                    s[119].off
                    @pic[v[235]].show {
                        "ui\bufficon"
                        .pos v[350], v[1126] .bottom
                        .chromakey 1
                        .scale 100
                        .trans 10
                        .rgbs 100, 100, 100, 100
                        .grid 8, 5 .cell v[21]
                        .mapLayer 8
                        .affectedByShake
                    }
                    
                } .else bl {
                    @pic[v[235]].show {
                        "ui\bufficon"
                        .pos v[350], v[1126] .bottom
                        .chromakey 1
                        .scale 100
                        .trans 100
                        .rgbs 100, 100, 100, 100
                        .grid 8, 5 .cell 1
                        .mapLayer 8
                        .affectedByShake
                    }
                    
                }
                
            }
            
            
        }
        @wait 0
        
    }
    @if v[81] == 4 {
        v[341] = v[4556]
        @loop 4 {
            @pic[v[341]].move {
                .pos 0, 0 .topLeft
                .scale 0
                .trans 100
                .time 0
                .rgbs 100, 100, 100, 100
            }
            v[341] += 1
            
        }
        
        v[325] = v[101] * 300 + 4805
        v[v[325]].copy v[705], 8
        @if v[706] > 0 {
            @comment "HPバーびよ～ん"
            @comment "処理開始"
            v[306] = v[706] * 100
            @comment "#0除算防止"
            v[305] = max(v[705], 1)
            v[306] /= v[305] * 2
            v[306] = max(v[306], 2)
            v[306] = min(v[306], 50)
            v[341] = v[1296] + 16
            v[342] = v[1297] + 21
            @pic[975].show {
                "HP_bar_main"
                .pos v[341], v[342] .left
                .chromakey 0
                .scale 100
                .trans 0
                .rgbs 100, 100, 100, 100
                .grid 1, 50 .cell v[306]
                .mapLayer 8
                .eraseWhenTransfer
                .affectedByFlash
                .affectedByShake
            }
            @pic[978].strpic {
                " \t[525]HP:\v[706]/\v[705]"
                .pos v[1296], v[1297] .topLeft
                .size 200, 24                .chromakey 1
                .scale 100
                .trans 0
                .rgbs 100, 100, 100, 100
                .font t[530], 11 .noShadow
                .spacing 0, 0
                .skin "" .nobg .noframe .noGradation .noPadding
                .mapLayer 8
                .eraseWhenTransfer
                .affectedByFlash
                .affectedByShake
            }
            @comment "処理終わり"
            @comment "MPある？"
            @pic[976].move {
                .pos 179, 226 .center
                .scale 100
                .trans 100
                .time 0
                .rgbs 100, 100, 100, 100
            }
            @if v[708] >= 0 {
                @comment "MPバーびよ～ん"
                @comment "処理開始"
                v[306] = v[708] * 100
                @comment "#0除算防止"
                v[305] = max(v[707], 1)
                v[306] /= v[305] * 1
                @pic[979].strpic {
                    "
          　 　　　 　 \v[306]％"
                    .pos v[1296], v[1297] .topLeft
                    .size 200, 24                    .chromakey 1
                    .scale 100
                    .trans 0
                    .rgbs 100, 100, 100, 100
                    .font t[530], 10 .noShadow
                    .spacing 0, 0
                    .skin "" .nobg .noframe .noGradation .noPadding
                    .mapLayer 8
                    .eraseWhenTransfer
                    .affectedByFlash
                    .affectedByShake
                }
                v[306] /= 2
                v[306] = max(min(v[306], 50), 2)
                v[341] += 72
                @pic[976].show {
                    "MP_bar_main"
                    .pos v[341], v[342] .left
                    .chromakey 0
                    .scale 100
                    .trans 0
                    .rgbs 100, 100, 100, 100
                    .grid 1, 50 .cell v[306]
                    .mapLayer 8
                    .eraseWhenTransfer
                    .affectedByFlash
                    .affectedByShake
                }
                @comment "処理終わり"
                @comment "名前だし処理"
                s[201].off
                @if s[52] .isOn() {
                    s[201].on
                    s[52].off
                    
                }
                @comment "#予約数"
                v[305] = v[325] + 65
                @if v[236] != v[v[305]] {
                    s[201].on
                    
                }
                v[236] = v[v[305]]
                @comment "#予約Unit"
                v[306] = v[325] + 33
                @if v[237] != v[v[306]] {
                    s[201].on
                    
                }
                v[237] = v[v[306]]
                @if s[201] .isOn() {
                    v[701] = v[237]
                    s[27].toggle
                    v[601] = 0
                    @comment "###############"
                    @comment "Init"
                    t[3000..3300] .asg ""
                    t[503] .asg ""
                    t[505] .asg t[20034]
                    @comment "Load"
                    v[1942] = v[84]
                    @if `v[v[101] * 300 + 4703] & 1 {
                        v[1941] = v[4520] - 10201
                        v[1941] += v[701]
                        t[2998] .asg t[v[1941]]
                        t[2998] .split "|", t[2998], v[1941]
                        t[503] .asg t[2998]
                        t[505] .asg t[3000]
                        t[2999..3000] .asg ""
                        @pic[980].strpic {
                            "

 \t[20186]:[\t[503]] \t[20143]:\v[236]"
                            .pos v[1296], v[1297] .topLeft
                            .size 0, 0                            .chromakey 1
                            .scale 100
                            .trans 0
                            .rgbs 100, 100, 100, 100
                            .font t[530], 11 .noShadow
                            .spacing 0, 0
                            .skin "" .nobg .noframe .noGradation .noPadding
                            .mapLayer 8
                            .eraseWhenTransfer
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    } .else bl {
                        v[1941] = v[1215]
                        v[1941] += v[701]
                        t[2998] .asg t[v[1941]]
                        t[2998] .split ",", t[2998], v[1941]
                        t[503] .asg t[2999]
                        t[505] .asg t[3000]
                        t[2999..3000] .asg ""
                        @pic[980].strpic {
                            "

 \t[20142]:[\t[503]] \t[20143]:\v[236]"
                            .pos v[1296], v[1297] .topLeft
                            .size 0, 0                            .chromakey 1
                            .scale 100
                            .trans 0
                            .rgbs 100, 100, 100, 100
                            .font t[530], 11 .noShadow
                            .spacing 0, 0
                            .skin "" .nobg .noframe .noGradation .noPadding
                            .mapLayer 8
                            .eraseWhenTransfer
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    }
                    @comment "###############"
                    s[27].toggle
                    
                }
                
            } .else bl {
                @pic[976].move {
                    .pos 179, 226 .center
                    .scale 100
                    .trans 100
                    .time 0
                    .rgbs 100, 100, 100, 100
                }
                @pic[979].move {
                    .pos 179, 226 .center
                    .scale 100
                    .trans 100
                    .time 0
                    .rgbs 100, 100, 100, 100
                }
                @if v[236] != -1 {
                    @pic[980].strpic {
                        "

 AD \v[709] AR \v[711]"
                        .pos v[1296], v[1297] .topLeft
                        .size 0, 0                        .chromakey 1
                        .scale 100
                        .trans 0
                        .rgbs 100, 100, 100, 100
                        .font t[530], 11 .noShadow
                        .spacing 0, 0
                        .skin "" .nobg .noframe .noGradation .noPadding
                        .mapLayer 8
                        .eraseWhenTransfer
                        .affectedByFlash
                        .affectedByShake
                    }
                    v[236] = -1
                    
                }
                
            }
            @comment "Passive"
            v[822] = v[v[101] * 300 + 4922]
            @if v[822] >= 0 {
                v[341] = v[1287] + v[1289] / 2 + 1
                v[342] = v[1288] + v[1290] / 2
                @pic[995].show {
                    "passive_icon\picon_0" .repl 1 v[822]
                    .pos v[341], v[342] .center
                    .chromakey 1
                    .scale 100
                    .trans 0
                    .rgbs 100, 100, 100, 100
                    .mapLayer 8
                    .eraseWhenTransfer
                    .affectedByFlash
                    .affectedByShake
                }
                
            } .else bl {
                @pic[995].move {
                    .pos v[1041], v[1042] .center
                    .scale 100
                    .trans 100
                    .time 0
                    .rgbs 100, 100, 100, 100
                }
                
            }
            @pic[1795].move {
                .pos v[1041], v[1042] .center
                .scale 100
                .trans 100
                .time 0
                .rgbs 100, 100, 100, 100
            }
            @comment "#Tactical Order"
            @pic[1796].move {
                .pos v[1041], v[1042] .center
                .scale 100
                .trans 100
                .time 0
                .rgbs 100, 100, 100, 100
            }
            @comment "#Morale"
            @pic[1797].move {
                .pos v[1041], v[1042] .center
                .scale 100
                .trans 100
                .time 0
                .rgbs 100, 100, 100, 100
            }
            @comment "#Melee Penalty"
            @pic[1798].move {
                .pos v[1041], v[1042] .center
                .scale 100
                .trans 100
                .time 0
                .rgbs 100, 100, 100, 100
            }
            @comment "Disable Buff icons"
            @loop 8 .dst v[235] {
                v[341] = v[1127] * v[235]
                v[341] += v[1125]
                v[235] += 987
                @pic[v[235]].show {
                    "ui\bufficon"
                    .pos v[341], v[1126] .bottom
                    .chromakey 1
                    .scale 100
                    .trans 100
                    .rgbs 100, 100, 100, 100
                    .grid 8, 5 .cell 1
                    .mapLayer 8
                    .affectedByShake
                }
                
            }
            
            v[300] = v[101] * 300 + 4700
            @comment "safety"
            @if `v[v[300] + 1] == 11 {
                v[301] = v[300]
                v[251] = 0
                v[700] = 0
                @if s[1] .isOff() {
                    v[315] = v[300] + 141
                    v[350] = v[4556]
                    v[353] = v[v[300] + 213]
                    @comment "###############"
                    @if v[v[315]] > 0 {
                        @comment "#RS check"
                        v[1301].copy v[31], 4
                        s[151].on
                        v[341] = 200 + v[v[315]]
                        s[152].on
                        v[254] = v[v[315]]
                        @call .cev 300
                        s[151].off
                        v[31].copy v[15], 4
                        @call .cev 1916
                        v[22] = 10
                        @if v[21] != 0 {
                            v[22] = 60
                            
                        }
                        v[343] = v[1038] - 2
                        v[341] = v[v[315] + 1]
                        @pic[982].show {
                            "product_icons\icon_n" .repl 1 v[341]
                            .pos v[1037], v[343] .center
                            .chromakey 1
                            .scale 100
                            .trans v[22]
                            .rgbs 100, 100, 100, 100
                            .mapLayer 8
                            .eraseWhenTransfer
                            .affectedByFlash
                            .affectedByShake
                        }
                        v[1037].copy v[351], 2
                        @if v[353] == 1 {
                            @pic[v[350]].show {
                                "StaticIcon"
                                .pos v[351], v[352] .topLeft
                                .chromakey 1
                                .scale 100
                                .trans 25
                                .rgbs 100, 100, 100, 100
                                .grid 8, 1 .cell 7
                                .mapLayer 9
                                .affectedByFlash
                                .affectedByShake
                            }
                            
                        } .else bl {
                            @pic[v[350]].show {
                                "StaticIcon"
                                .pos v[351], v[352] .bottomRight
                                .chromakey 1
                                .scale 100
                                .trans 100
                                .rgbs 100, 100, 100, 100
                                .grid 8, 1 .cell 8
                                .mapLayer 9
                                .affectedByFlash
                                .affectedByShake
                            }
                            
                        }
                        
                    } .else bl {
                        @pic[982].move {
                            .pos v[1051], v[1052] .center
                            .scale 100
                            .trans 100
                            .time 0
                            .rgbs 100, 100, 100, 100
                        }
                        
                    }
                    @comment "###############"
                    @comment "W"
                    v[350] += 1
                    v[315] += 3
                    @if v[v[315]] > 0 {
                        v[1301].copy v[31], 4
                        s[151].on
                        v[341] = 200 + v[v[315]]
                        s[152].on
                        v[254] = v[v[315]]
                        @call .cev 300
                        s[151].off
                        v[31].copy v[15], 4
                        @call .cev 1916
                        v[22] = 10
                        @if v[21] != 0 {
                            v[22] = 60
                            
                        }
                        v[343] = v[1040] - 2
                        v[341] = v[v[315] + 1]
                        @pic[983].show {
                            "product_icons\icon_n" .repl 1 v[341]
                            .pos v[1039], v[343] .center
                            .chromakey 1
                            .scale 100
                            .trans v[22]
                            .rgbs 100, 100, 100, 100
                            .mapLayer 8
                            .eraseWhenTransfer
                            .affectedByFlash
                            .affectedByShake
                        }
                        v[1039].copy v[351], 2
                        @if v[353] == 2 {
                            @pic[v[350]].show {
                                "StaticIcon"
                                .pos v[351], v[352] .topLeft
                                .chromakey 1
                                .scale 100
                                .trans 25
                                .rgbs 100, 100, 100, 100
                                .grid 8, 1 .cell 7
                                .mapLayer 9
                                .affectedByFlash
                                .affectedByShake
                            }
                            
                        } .else bl {
                            @pic[v[350]].show {
                                "StaticIcon"
                                .pos v[351], v[352] .bottomRight
                                .chromakey 1
                                .scale 100
                                .trans 100
                                .rgbs 100, 100, 100, 100
                                .grid 8, 1 .cell 8
                                .mapLayer 9
                                .affectedByFlash
                                .affectedByShake
                            }
                            
                        }
                        
                    } .else bl {
                        @pic[983].move {
                            .pos v[1051], v[1052] .center
                            .scale 100
                            .trans 100
                            .time 0
                            .rgbs 100, 100, 100, 100
                        }
                        
                    }
                    @comment "E"
                    v[350] += 1
                    v[315] += 3
                    @if v[v[315]] > 0 {
                        v[1301].copy v[31], 4
                        s[151].on
                        v[341] = 200 + v[v[315]]
                        s[152].on
                        v[254] = v[v[315]]
                        @call .cev 300
                        s[151].off
                        v[31].copy v[15], 4
                        @call .cev 1916
                        v[22] = 10
                        @if v[21] != 0 {
                            v[22] = 60
                            
                        }
                        v[343] = v[1042] - 2
                        v[341] = v[v[315] + 1]
                        @pic[984].show {
                            "product_icons\icon_n" .repl 1 v[341]
                            .pos v[1041], v[343] .center
                            .chromakey 1
                            .scale 100
                            .trans v[22]
                            .rgbs 100, 100, 100, 100
                            .mapLayer 8
                            .eraseWhenTransfer
                            .affectedByFlash
                            .affectedByShake
                        }
                        v[1041].copy v[351], 2
                        @if v[353] == 3 {
                            @pic[v[350]].show {
                                "StaticIcon"
                                .pos v[351], v[352] .topLeft
                                .chromakey 1
                                .scale 100
                                .trans 25
                                .rgbs 100, 100, 100, 100
                                .grid 8, 1 .cell 7
                                .mapLayer 9
                                .affectedByFlash
                                .affectedByShake
                            }
                            
                        } .else bl {
                            @pic[v[350]].show {
                                "StaticIcon"
                                .pos v[351], v[352] .bottomRight
                                .chromakey 1
                                .scale 100
                                .trans 100
                                .rgbs 100, 100, 100, 100
                                .grid 8, 1 .cell 8
                                .mapLayer 9
                                .affectedByFlash
                                .affectedByShake
                            }
                            
                        }
                        
                    } .else bl {
                        @pic[984].move {
                            .pos v[1051], v[1052] .center
                            .scale 100
                            .trans 100
                            .time 0
                            .rgbs 100, 100, 100, 100
                        }
                        
                    }
                    @comment "R"
                    v[350] += 1
                    v[315] += 3
                    @if v[v[315]] > 0 {
                        v[1301].copy v[31], 4
                        s[151].on
                        v[341] = 200 + v[v[315]]
                        s[152].on
                        v[254] = v[v[315]]
                        @call .cev 300
                        s[151].off
                        v[31].copy v[15], 4
                        @call .cev 1916
                        v[22] = 10
                        @if v[21] != 0 {
                            v[22] = 60
                            
                        }
                        v[343] = v[1044] - 2
                        v[341] = v[v[315] + 1]
                        @pic[985].show {
                            "product_icons\icon_n" .repl 1 v[341]
                            .pos v[1043], v[343] .center
                            .chromakey 1
                            .scale 100
                            .trans v[22]
                            .rgbs 100, 100, 100, 100
                            .mapLayer 8
                            .eraseWhenTransfer
                            .affectedByFlash
                            .affectedByShake
                        }
                        v[1043].copy v[351], 2
                        @if v[353] == 4 {
                            @pic[v[350]].show {
                                "StaticIcon"
                                .pos v[351], v[352] .topLeft
                                .chromakey 1
                                .scale 100
                                .trans 25
                                .rgbs 100, 100, 100, 100
                                .grid 8, 1 .cell 7
                                .mapLayer 9
                                .affectedByFlash
                                .affectedByShake
                            }
                            
                        } .else bl {
                            @pic[v[350]].show {
                                "StaticIcon"
                                .pos v[351], v[352] .bottomRight
                                .chromakey 1
                                .scale 100
                                .trans 100
                                .rgbs 100, 100, 100, 100
                                .grid 8, 1 .cell 8
                                .mapLayer 9
                                .affectedByFlash
                                .affectedByShake
                            }
                            
                        }
                        
                    } .else bl {
                        @pic[985].move {
                            .pos v[1051], v[1052] .center
                            .scale 100
                            .trans 100
                            .time 0
                            .rgbs 100, 100, 100, 100
                        }
                        
                    }
                    
                }
                v[315] = v[300] + 153
                v[1301].copy v[31], 4
                @if v[v[315]] >= 10000 {
                    v[341] = v[v[315]] - 9800
                    @if v[341] > 399 {
                        v[255] = v[101]
                        s[151].on
                        @call .cev v[341]
                        s[151].off
                        v[31].copy v[15], 4
                        @call .cev 1916
                        v[22] = 10
                        @if v[21] != 0 {
                            v[22] = 60
                            
                        }
                        
                    }
                    @if `v[v[300] + 153] > 0 {
                        v[342] = v[v[300] + 154]
                        @if v[342] <= 0 {
                            @pic[v[1226]].show {
                                "StaticIcon"
                                .pos v[1045], v[1046] .center
                                .chromakey 1
                                .scale 100
                                .trans v[22]
                                .rgbs 100, 100, 100, 100
                                .grid 8, 1 .cell 2
                                .mapLayer 8
                                .eraseWhenTransfer
                                .affectedByFlash
                                .affectedByShake
                            }
                            
                        } .else bl {
                            v[343] = v[1046] - 1
                            @pic[v[1226]].show {
                                "tech_icons\n" .repl 1 v[342]
                                .pos v[1045], v[343] .center
                                .chromakey 1
                                .scale 100
                                .trans v[22]
                                .rgbs 100, 100, 100, 100
                                .mapLayer 8
                                .eraseWhenTransfer
                                .affectedByFlash
                                .affectedByShake
                            }
                            
                        }
                        
                    } .else bl {
                        @pic[v[1226]].move {
                            .pos v[1051], v[1052] .center
                            .scale 100
                            .trans 100
                            .time 0
                            .rgbs 100, 100, 100, 100
                        }
                        
                    }
                    
                }
                @comment "#########
TechSlots"
                v[315] = v[300] + 156
                v[1301].copy v[31], 4
                @if v[v[315]] >= 10000 {
                    v[341] = v[v[315]] - 9800
                    @if v[341] > 399 {
                        v[255] = v[101]
                        s[151].on
                        @call .cev v[341]
                        s[151].off
                        v[31].copy v[15], 4
                        @call .cev 1916
                        v[22] = 10
                        @if v[21] != 0 {
                            v[22] = 60
                            
                        }
                        
                    }
                    @if `v[v[300] + 156] > 0 {
                        v[342] = v[v[300] + 157]
                        v[341] = v[1226] + 1
                        @if v[342] <= 0 {
                            @pic[v[341]].show {
                                "StaticIcon"
                                .pos v[1047], v[1048] .center
                                .chromakey 1
                                .scale 100
                                .trans v[22]
                                .rgbs 100, 100, 100, 100
                                .grid 8, 1 .cell 2
                                .mapLayer 8
                                .eraseWhenTransfer
                                .affectedByFlash
                                .affectedByShake
                            }
                            
                        } .else bl {
                            v[343] = v[1048] - 1
                            @pic[v[341]].show {
                                "tech_icons\n" .repl 1 v[342]
                                .pos v[1047], v[343] .center
                                .chromakey 1
                                .scale 100
                                .trans v[22]
                                .rgbs 100, 100, 100, 100
                                .mapLayer 8
                                .eraseWhenTransfer
                                .affectedByFlash
                                .affectedByShake
                            }
                            
                        }
                        
                    } .else bl {
                        @pic[v[341]].move {
                            .pos v[1051], v[1052] .center
                            .scale 100
                            .trans 100
                            .time 0
                            .rgbs 100, 100, 100, 100
                        }
                        
                    }
                    
                }
                //@comment "#########TechSlots"
                v[315] = v[300] + 159
                v[1301].copy v[31], 4
                @if v[v[315]] >= 10000 {
                    v[341] = v[v[315]] - 9800
                    @if v[341] > 399 {
                        v[255] = v[101]
                        s[151].on
                        @call .cev v[341]
                        s[151].off
                        v[31].copy v[15], 4
                        @call .cev 1916
                        v[22] = 10
                        @if v[21] != 0 {
                            v[22] = 60
                            
                        }
                        
                    }
                    @if `v[v[300] + 159] > 0 {
                        v[341] = v[1226] + 2
                        v[342] = v[v[300] + 160]
                        @if v[342] <= 0 {
                            @pic[v[341]].show {
                                "StaticIcon"
                                .pos v[1049], v[1050] .center
                                .chromakey 1
                                .scale 100
                                .trans v[22]
                                .rgbs 100, 100, 100, 100
                                .grid 8, 1 .cell 2
                                .mapLayer 8
                                .eraseWhenTransfer
                                .affectedByFlash
                                .affectedByShake
                            }
                            
                        } .else bl {
                            v[343] = v[1050] - 1
                            @pic[v[341]].show {
                                "tech_icons\n" .repl 1 v[342]
                                .pos v[1049], v[343] .center
                                .chromakey 1
                                .scale 100
                                .trans v[22]
                                .rgbs 100, 100, 100, 100
                                .mapLayer 8
                                .eraseWhenTransfer
                                .affectedByFlash
                                .affectedByShake
                            }
                            
                        }
                        
                    } .else bl {
                        @pic[v[341]].move {
                            .pos v[1051], v[1052] .center
                            .scale 100
                            .trans 100
                            .time 0
                            .rgbs 100, 100, 100, 100
                        }
                        
                    }
                    
                }
                
            }
            
        } .else bl {
            //@comment "選択中のObjが撃破されている"
            v[81] = 0
            
        }
        @wait 0
        
    }
    @if v[81] == 5 {
        v[341] = v[4556]
        @loop 4 {
            @pic[v[341]].move {
                .pos 0, 0 .topLeft
                .scale 0
                .trans 100
                .time 0
                .rgbs 100, 100, 100, 100
            }
            v[341] += 1
            
        }
        
        v[325] = v[100] * 300
        v[325] += 4805
        v[v[325]].copy v[705], 4
        @if v[706] > 0 {
            //@comment "HPバーびよ～ん"
            //@comment "処理開始"
            v[306] = v[706] * 100
            //@comment "#0除算防止"
            v[305] = max(v[705], 1)
            v[306] /= v[305] * 2
            v[306] = max(v[306], 2)
            v[306] = min(v[306], 50)
            v[341] = v[1296] + 16
            v[342] = v[1297] + 21
            @pic[975].show {
                "HP_bar_main"
                .pos v[341], v[342] .left
                .chromakey 0
                .scale 100
                .trans 0
                .rgbs 100, 100, 100, 100
                .grid 1, 50 .cell v[306]
                .mapLayer 8
                .eraseWhenTransfer
                .affectedByFlash
                .affectedByShake
            }
            @pic[978].strpic {
                " \t[525]HP:\v[706]/\v[705]"
                .pos v[1296], v[1297] .topLeft
                .size 200, 24                .chromakey 1
                .scale 100
                .trans 0
                .rgbs 100, 100, 100, 100
                .font t[530], 11 .noShadow
                .spacing 0, 0
                .skin "" .nobg .noframe .noGradation .noPadding
                .mapLayer 8
                .eraseWhenTransfer
                .affectedByFlash
                .affectedByShake
            }
            //@comment "処理終わり"
            //@comment "MPある？"
            @pic[976].move {
                .pos 179, 226 .center
                .scale 100
                .trans 100
                .time 0
                .rgbs 100, 100, 100, 100
            }
            //@comment "Passive"
            v[822] = v[v[100] * 300 + 4922]
            @if v[822] >= 0 {
                v[341] = v[1287] + v[1289] / 2 + 1
                v[342] = v[1288] + v[1290] / 2
                @pic[995].show {
                    "passive_icon\picon_0" .repl 1 v[822]
                    .pos v[341], v[342] .center
                    .chromakey 1
                    .scale 100
                    .trans 0
                    .rgbs 100, 100, 100, 100
                    .mapLayer 8
                    .eraseWhenTransfer
                    .affectedByFlash
                    .affectedByShake
                }
                
            } .else bl {
                @pic[995].move {
                    .pos v[1041], v[1042] .center
                    .scale 100
                    .trans 100
                    .time 0
                    .rgbs 100, 100, 100, 100
                }
                
            }
            //@comment "Disable Buff icons"
            @pic[1795].move {
                .pos v[1041], v[1042] .center
                .scale 100
                .trans 100
                .time 0
                .rgbs 100, 100, 100, 100
            }
            //@comment "#Tactical Order"
            @pic[1796].move {
                .pos v[1041], v[1042] .center
                .scale 100
                .trans 100
                .time 0
                .rgbs 100, 100, 100, 100
            }
            @comment "#Morale"
            @pic[1797].move {
                .pos v[1041], v[1042] .center
                .scale 100
                .trans 100
                .time 0
                .rgbs 100, 100, 100, 100
            }
            @comment "#Melee Penalty"
            @pic[1798].move {
                .pos v[1041], v[1042] .center
                .scale 100
                .trans 100
                .time 0
                .rgbs 100, 100, 100, 100
            }
            @loop 8 .dst v[235] {
                v[341] = v[1127] * v[235]
                v[341] += v[1125]
                v[235] += 987
                @pic[v[235]].show {
                    "ui\bufficon"
                    .pos v[341], v[1126] .bottom
                    .chromakey 1
                    .scale 100
                    .trans 100
                    .rgbs 100, 100, 100, 100
                    .grid 8, 5 .cell 1
                    .mapLayer 8
                    .affectedByShake
                }
                
            }
            
            
        } .else bl {
            v[81] = 0
            //@comment "選択中のObjが撃破されている"
            
        }
        @wait 0
        
    }
    @if v[81] == 6 {
        v[341] = v[4556]
        @loop 4 {
            v[341] += 1
            @pic[v[341]].move {
                .pos 0, 0 .topLeft
                .scale 0
                .trans 100
                .time 0
                .rgbs 100, 100, 100, 100
            }
            
        }
        
        @pic[978].erase
        v[202] = 101
        v[302..303] = 0
        @loop .inf() {
            @if v[v[202]] == 0 {
                //@comment "とぎれた"
                @break
                
            }
            @if v[202] > v[1007] {
                //@comment "とりあえず40体までしか選択できない"
                @break
                
            }
            //@comment "配列ゲット"
            v[301] = v[v[202]] * 300
            v[301] += 4700
            v[300] = v[301] + 1
            @if v[v[300]] >= 1 {
                //@comment "生存してる数をゲット"
                v[302] += 1
                v[299] = v[301] + 106
                //@comment "ＨＰゲット"
                v[303] += v[v[299]]
                
            }
            v[202] += 1
            
        }
        
        //@comment "損耗率計算"
        v[306] = v[303] * 100
        //@comment "#0除算防止"
        v[305] = max(v[98], 1)
        v[306] /= v[305]
        v[307] = v[306]
        v[306] /= 2
        v[306] = max(v[306], 1)
        //@comment "Set pos"
        v[341] = v[1296] + 116
        v[342] = v[1297] + 12
        @if v[302] <= 0 {
            //@comment "全滅！"
            v[81] = 0
            @ev.abort
            
        }
        v[1971] = v[302]
        v[1972] = v[307]
        @pic[995].move {
            .pos v[1041], v[1042] .center
            .scale 100
            .trans 100
            .time 0
            .rgbs 100, 100, 100, 100
        }
        //@comment "Passive"
        v[822] = v[v[101] * 300 + 4922]
        @if v[822] >= 0 {
            v[341] = v[1287] + v[1289] / 2 + 1
            v[342] = v[1288] + v[1290] / 2
            @pic[995].show {
                "passive_icon\picon_0" .repl 1 v[822]
                .pos v[341], v[342] .center
                .chromakey 1
                .scale 100
                .trans 0
                .rgbs 100, 100, 100, 100
                .mapLayer 8
                .eraseWhenTransfer
                .affectedByFlash
                .affectedByShake
            }
            
        } .else bl {
            @pic[995].move {
                .pos v[1041], v[1042] .center
                .scale 100
                .trans 100
                .time 0
                .rgbs 100, 100, 100, 100
            }
            
        }
        //@comment "#Tactical Order"
        @pic[1796].move {
            .pos v[1041], v[1042] .center
            .scale 100
            .trans 100
            .time 0
            .rgbs 100, 100, 100, 100
        }
        //@comment "#Morale"
        @pic[1797].move {
            .pos v[1041], v[1042] .center
            .scale 100
            .trans 100
            .time 0
            .rgbs 100, 100, 100, 100
        }
        //@comment "#Melee Penalty"
        @pic[1798].move {
            .pos v[1041], v[1042] .center
            .scale 100
            .trans 100
            .time 0
            .rgbs 100, 100, 100, 100
        }
        //@comment "Disable Buff icons"
        @loop 8 .dst v[235] {
            v[341] = v[1127] * v[235]
            v[341] += v[1125]
            v[235] += 987
            @pic[v[235]].show {
                "ui\bufficon"
                .pos v[341], v[1126] .bottom
                .chromakey 1
                .scale 100
                .trans 100
                .rgbs 100, 100, 100, 100
                .grid 8, 5 .cell 1
                .mapLayer 8
                .affectedByShake
            }
            
        }
        
        v[300] = v[101] * 300 + 4700
        @if `v[v[300] + 1] == 11 {
            v[301] = v[300]
            v[251] = 0
            v[700] = 0
            @if s[1] .isOff() {
                v[315] = v[300] + 141
                v[350] = v[4556]
                v[353] = v[v[300] + 213]
                //@comment "###############"
                @if v[v[315]] > 0 {
                    //@comment "#RS check"
                    v[1301].copy v[31], 4
                    s[151].on
                    v[341] = 200 + v[v[315]]
                    s[152].on
                    v[254] = v[v[315]]
                    @call .cev 300
                    s[151].off
                    v[31].copy v[15], 4
                    @call .cev 1916
                    v[22] = 10
                    @if v[21] != 0 {
                        v[22] = 60
                        
                    }
                    v[343] = v[1038] - 2
                    v[341] = v[v[315] + 1]
                    @pic[982].show {
                        "product_icons\icon_n" .repl 1 v[341]
                        .pos v[1037], v[343] .center
                        .chromakey 1
                        .scale 100
                        .trans v[22]
                        .rgbs 100, 100, 100, 100
                        .mapLayer 8
                        .eraseWhenTransfer
                        .affectedByFlash
                        .affectedByShake
                    }
                    v[1037].copy v[351], 2
                    @if v[353] == 1 {
                        @pic[v[350]].show {
                            "StaticIcon"
                            .pos v[351], v[352] .topLeft
                            .chromakey 1
                            .scale 100
                            .trans 25
                            .rgbs 100, 100, 100, 100
                            .grid 8, 1 .cell 7
                            .mapLayer 9
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    } .else bl {
                        @pic[v[350]].show {
                            "StaticIcon"
                            .pos v[351], v[352] .bottomRight
                            .chromakey 1
                            .scale 100
                            .trans 100
                            .rgbs 100, 100, 100, 100
                            .grid 8, 1 .cell 8
                            .mapLayer 9
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    }
                    
                } .else bl {
                    @pic[982].move {
                        .pos v[1051], v[1052] .center
                        .scale 100
                        .trans 100
                        .time 0
                        .rgbs 100, 100, 100, 100
                    }
                    
                }
                //@comment "###############"
                //@comment "W"
                v[315] = v[300] + 144
                v[350] += 1
                @if v[v[315]] > 0 {
                    v[1301].copy v[31], 4
                    s[151].on
                    v[341] = 200 + v[v[315]]
                    s[152].on
                    v[254] = v[v[315]]
                    @call .cev 300
                    s[151].off
                    v[31].copy v[15], 4
                    @call .cev 1916
                    v[22] = 10
                    @if v[21] != 0 {
                        v[22] = 60
                        
                    }
                    v[343] = v[1040] - 2
                    v[341] = v[v[315] + 1]
                    @pic[983].show {
                        "product_icons\icon_n" .repl 1 v[341]
                        .pos v[1039], v[343] .center
                        .chromakey 1
                        .scale 100
                        .trans v[22]
                        .rgbs 100, 100, 100, 100
                        .mapLayer 8
                        .eraseWhenTransfer
                        .affectedByFlash
                        .affectedByShake
                    }
                    v[1039].copy v[351], 2
                    @if v[353] == 1 {
                        @pic[v[350]].show {
                            "StaticIcon"
                            .pos v[351], v[352] .topLeft
                            .chromakey 1
                            .scale 100
                            .trans 25
                            .rgbs 100, 100, 100, 100
                            .grid 8, 1 .cell 7
                            .mapLayer 9
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    } .else bl {
                        @pic[v[350]].show {
                            "StaticIcon"
                            .pos v[351], v[352] .bottomRight
                            .chromakey 1
                            .scale 100
                            .trans 100
                            .rgbs 100, 100, 100, 100
                            .grid 8, 1 .cell 8
                            .mapLayer 9
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    }
                    
                } .else bl {
                    @pic[983].move {
                        .pos v[1051], v[1052] .center
                        .scale 100
                        .trans 100
                        .time 0
                        .rgbs 100, 100, 100, 100
                    }
                    
                }
                //@comment "E"
                v[315] = v[300] + 147
                v[350] += 1
                @if v[v[315]] > 0 {
                    v[1301].copy v[31], 4
                    s[151].on
                    v[341] = 200 + v[v[315]]
                    s[152].on
                    v[254] = v[v[315]]
                    @call .cev 300
                    s[151].off
                    v[31].copy v[15], 4
                    @call .cev 1916
                    v[22] = 10
                    @if v[21] != 0 {
                        v[22] = 60
                        
                    }
                    v[343] = v[1042] - 2
                    v[341] = v[v[315] + 1]
                    @pic[984].show {
                        "product_icons\icon_n" .repl 1 v[341]
                        .pos v[1041], v[343] .center
                        .chromakey 1
                        .scale 100
                        .trans v[22]
                        .rgbs 100, 100, 100, 100
                        .mapLayer 8
                        .eraseWhenTransfer
                        .affectedByFlash
                        .affectedByShake
                    }
                    v[1041].copy v[351], 2
                    @if v[353] == 1 {
                        @pic[v[350]].show {
                            "StaticIcon"
                            .pos v[351], v[352] .topLeft
                            .chromakey 1
                            .scale 100
                            .trans 25
                            .rgbs 100, 100, 100, 100
                            .grid 8, 1 .cell 7
                            .mapLayer 9
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    } .else bl {
                        @pic[v[350]].show {
                            "StaticIcon"
                            .pos v[351], v[352] .bottomRight
                            .chromakey 1
                            .scale 100
                            .trans 100
                            .rgbs 100, 100, 100, 100
                            .grid 8, 1 .cell 8
                            .mapLayer 9
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    }
                    
                } .else bl {
                    @pic[984].move {
                        .pos v[1051], v[1052] .center
                        .scale 100
                        .trans 100
                        .time 0
                        .rgbs 100, 100, 100, 100
                    }
                    
                }
                //@comment "R"
                v[315] = v[300] + 150
                v[350] += 1
                @if v[v[315]] > 0 {
                    v[1301].copy v[31], 4
                    s[151].on
                    v[341] = 200 + v[v[315]]
                    s[152].on
                    v[254] = v[v[315]]
                    @call .cev 300
                    s[151].off
                    v[31].copy v[15], 4
                    @call .cev 1916
                    v[22] = 10
                    @if v[21] != 0 {
                        v[22] = 60
                        
                    }
                    v[343] = v[1044] - 2
                    v[341] = v[v[315] + 1]
                    @pic[985].show {
                        "product_icons\icon_n" .repl 1 v[341]
                        .pos v[1043], v[343] .center
                        .chromakey 1
                        .scale 100
                        .trans v[22]
                        .rgbs 100, 100, 100, 100
                        .mapLayer 8
                        .eraseWhenTransfer
                        .affectedByFlash
                        .affectedByShake
                    }
                    v[1043].copy v[351], 2
                    @if v[353] == 1 {
                        @pic[v[350]].show {
                            "StaticIcon"
                            .pos v[351], v[352] .topLeft
                            .chromakey 1
                            .scale 100
                            .trans 25
                            .rgbs 100, 100, 100, 100
                            .grid 8, 1 .cell 7
                            .mapLayer 9
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    } .else bl {
                        @pic[v[350]].show {
                            "StaticIcon"
                            .pos v[351], v[352] .bottomRight
                            .chromakey 1
                            .scale 100
                            .trans 100
                            .rgbs 100, 100, 100, 100
                            .grid 8, 1 .cell 8
                            .mapLayer 9
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    }
                    
                } .else bl {
                    @pic[985].move {
                        .pos v[1051], v[1052] .center
                        .scale 100
                        .trans 100
                        .time 0
                        .rgbs 100, 100, 100, 100
                    }
                    
                }
                
            }
            v[315] = v[300] + 153
            v[1301].copy v[31], 4
            @if v[v[315]] >= 10000 {
                v[341] = v[v[315]] - 9800
                @if v[341] > 399 {
                    v[255] = v[101]
                    s[151].on
                    @call .cev v[341]
                    s[151].off
                    v[31].copy v[15], 4
                    @call .cev 1916
                    v[22] = 10
                    @if v[21] != 0 {
                        v[22] = 60
                        
                    }
                    
                }
                @if `v[v[300] + 153] > 0 {
                    v[342] = v[v[300] + 154]
                    @if v[342] <= 0 {
                        @pic[v[1226]].show {
                            "StaticIcon"
                            .pos v[1045], v[1046] .center
                            .chromakey 1
                            .scale 100
                            .trans v[22]
                            .rgbs 100, 100, 100, 100
                            .grid 8, 1 .cell 2
                            .mapLayer 8
                            .eraseWhenTransfer
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    } .else bl {
                        v[343] = v[1046] - 1
                        @pic[v[1226]].show {
                            "tech_icons\n" .repl 1 v[342]
                            .pos v[1045], v[343] .center
                            .chromakey 1
                            .scale 100
                            .trans v[22]
                            .rgbs 100, 100, 100, 100
                            .mapLayer 8
                            .eraseWhenTransfer
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    }
                    
                } .else bl {
                    @pic[v[1226]].move {
                        .pos v[1051], v[1052] .center
                        .scale 100
                        .trans 100
                        .time 0
                        .rgbs 100, 100, 100, 100
                    }
                    
                }
                
            }
            //@comment "#########TechSlots"
            v[315] = v[300] + 156
            v[1301].copy v[31], 4
            @if v[v[315]] >= 10000 {
                v[341] = v[v[315]] - 9800
                @if v[341] > 399 {
                    v[255] = v[101]
                    s[151].on
                    @call .cev v[341]
                    s[151].off
                    v[31].copy v[15], 4
                    @call .cev 1916
                    v[22] = 10
                    @if v[21] != 0 {
                        v[22] = 60
                        
                    }
                    
                }
                @if `v[v[300] + 156] > 0 {
                    v[342] = v[v[300] + 157]
                    v[341] = v[1226] + 1
                    @if v[342] <= 0 {
                        @pic[v[341]].show {
                            "StaticIcon"
                            .pos v[1047], v[1048] .center
                            .chromakey 1
                            .scale 100
                            .trans v[22]
                            .rgbs 100, 100, 100, 100
                            .grid 8, 1 .cell 2
                            .mapLayer 8
                            .eraseWhenTransfer
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    } .else bl {
                        v[343] = v[1048] - 1
                        @pic[v[341]].show {
                            "tech_icons\n" .repl 1 v[342]
                            .pos v[1047], v[343] .center
                            .chromakey 1
                            .scale 100
                            .trans v[22]
                            .rgbs 100, 100, 100, 100
                            .mapLayer 8
                            .eraseWhenTransfer
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    }
                    
                } .else bl {
                    @pic[v[341]].move {
                        .pos v[1051], v[1052] .center
                        .scale 100
                        .trans 100
                        .time 0
                        .rgbs 100, 100, 100, 100
                    }
                    
                }
                
            }
            //@comment "#########TechSlots"
            v[315] = v[300] + 159
            v[1301].copy v[31], 4
            @if v[v[315]] >= 10000 {
                v[341] = v[v[315]] - 9800
                @if v[341] > 399 {
                    v[255] = v[101]
                    s[151].on
                    @call .cev v[341]
                    s[151].off
                    v[31].copy v[15], 4
                    @call .cev 1916
                    v[22] = 10
                    @if v[21] != 0 {
                        v[22] = 60
                        
                    }
                    
                }
                @if `v[v[300] + 159] > 0 {
                    v[341] = v[1226] + 2
                    v[342] = v[v[300] + 160]
                    @if v[342] <= 0 {
                        @pic[v[341]].show {
                            "StaticIcon"
                            .pos v[1049], v[1050] .center
                            .chromakey 1
                            .scale 100
                            .trans v[22]
                            .rgbs 100, 100, 100, 100
                            .grid 8, 1 .cell 2
                            .mapLayer 8
                            .eraseWhenTransfer
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    } .else bl {
                        v[343] = v[1050] - 1
                        @pic[v[341]].show {
                            "tech_icons\n" .repl 1 v[342]
                            .pos v[1049], v[343] .center
                            .chromakey 1
                            .scale 100
                            .trans v[22]
                            .rgbs 100, 100, 100, 100
                            .mapLayer 8
                            .eraseWhenTransfer
                            .affectedByFlash
                            .affectedByShake
                        }
                        
                    }
                    
                } .else bl {
                    @pic[v[341]].move {
                        .pos v[1051], v[1052] .center
                        .scale 100
                        .trans 100
                        .time 0
                        .rgbs 100, 100, 100, 100
                    }
                    
                }
                
            }
            
        }
        @wait 0
        
    }
    @if v[81] != 3 {
        @if v[81] != 5 {
            //@comment "敵見てなくて指定してるものがなければ消しておく"
            @if v[101] == 0 {
                v[81] = 0
                
            }
            
        }
        
    }
    
} .else bl {
    @if v[81] == 0 {
        s[30].off
        v[341] = v[4556]
        @loop 4 {
            @pic[v[341]].move {
                .pos 0, 0 .topLeft
                .scale 0
                .trans 100
                .time 0
                .keepRgbs
                .keepEffect
                .keepFlip
            }
            v[341] += 1
            
        }
        
        @pic[1799..1800].erase
        @pic[975..985].erase
        @pic[995].move {
            .pos v[1041], v[1042] .center
            .scale 100
            .trans 100
            .time 0
            .rgbs 100, 100, 100, 100
        }
        //@comment "Disable Buff icons"
        @pic[1795].move {
            .pos v[1041], v[1042] .center
            .scale 100
            .trans 100
            .time 0
            .rgbs 100, 100, 100, 100
        }
        //@comment "#Tactical Order"
        @pic[1796].move {
            .pos v[1041], v[1042] .center
            .scale 100
            .trans 100
            .time 0
            .rgbs 100, 100, 100, 100
        }
        //@comment "#Morale"
        @pic[1797].move {
            .pos v[1041], v[1042] .center
            .scale 100
            .trans 100
            .time 0
            .rgbs 100, 100, 100, 100
        }
        //@comment "#Melee Penalty"
        @pic[1798].move {
            .pos v[1041], v[1042] .center
            .scale 100
            .trans 100
            .time 0
            .rgbs 100, 100, 100, 100
        }
        @loop 8 .dst v[235] {
            v[341] = v[1127] * v[235]+ v[1125]
            v[235] += 987
            @pic[v[235]].show {
                "ui\bufficon"
                .pos v[341], v[1126] .bottom
                .chromakey 1
                .scale 100
                .trans 100
                .rgbs 100, 100, 100, 100
                .grid 8, 5 .cell 1
                .mapLayer 8
                .affectedByShake
            }
            
        }
        
        //@comment "Operation Panel"
        @pic[981].move {
            .pos 16, 232 .center
            .scale 100
            .trans 100
            .time 0
            .rgbs 100, 100, 100, 100
        }
        v[341] = v[496] * v[1129]
        v[341] += v[1130]
        @pic[978].strpic {
            " Map edit mode"
            .pos v[1296], v[1297] .topLeft
            .size 0, 0            .chromakey 1
            .scale 100
            .trans 0
            .rgbs 100, 100, 100, 100
            .font t[530], 11 .noShadow
            .spacing 0, 0
            .skin "" .nobg .noframe .noGradation .noPadding
            .mapLayer 8
            .eraseWhenTransfer
            .affectedByFlash
            .affectedByShake
        }
        @wait 0
        @wait 0
        
    }
    
}
@if v[204] >= v[1006] {
    @wait 0
    
}
@pic[1774].getInfo .cewh .currentRect v[1952], v[1953], v[1954], v[1955]
@if s[187] .isOn() {
    @pic[1774].show {
        "ui\switch_idle_worker"
        .pos v[1952], v[1953] .center
        .chromakey 1
        .scale 100
        .trans 35
        .rgbs 100, 100, 100, 100
        .grid 1, 2 .cell 2
        .mapLayer 8
        .eraseWhenTransfer
    }
    
} .else bl {
    @pic[1774].show {
        "ui\switch_idle_worker"
        .pos v[1952], v[1953] .center
        .chromakey 1
        .scale 100
        .trans 35
        .rgbs 100, 100, 100, 100
        .grid 1, 2 .cell 1
        .mapLayer 8
        .eraseWhenTransfer
    }
    
}
